import{d as g,m as d,a7 as x,aL as D,aj as y,A as z,az as P,aG as F,o as B,c as H,w as N,b as I,a as c,aw as L,p as R,l as $}from"./index.7cf42d56.js";import{u as j}from"./index.ab2eb443.js";import{F as E}from"./FullscreenDisplay.1b26e18e.js";import{a as V,H as Y}from"./SharedNav.089cb081.js";import{u as A}from"./useCanvas.87314d3a.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import"./LogoLight.382d1bf4.js";import"./Button.36184581.js";const X=p=>(R("data-v-99a1931e"),p=p(),$(),p),q=X(()=>c("span",null,"/",-1)),J=g({__name:"Turntable",setup(p){const M=d(),k=x(),m=d(!1),r=d(0),f=d(),h=j(Math.PI/360,Math.PI/1440,Math.PI/8);return A(M,{useDevicePixelRatio:!1}).then(w=>{const{canvas:t,onDispose:u,onResize:T,size:S}=w,{width:s,height:o}=S,a=t.getContext("2d"),b=D(()=>Math.min(s.value/2,o.value/2));if(!a)throw new Error("Your device doesn't support HTML5 canvases.");let i=NaN,v=NaN;a.translate(s.value/2,o.value/2);function _(){a.beginPath(),a.fillStyle="white",a.arc(s.value/2,o.value/2,b.value,0,2*Math.PI),a.fill()}f.value=_,_(),T(_),u(y(z({pointer:k,rotation:r}),({pointer:{x:e,y:n}})=>{if(!m.value){i=NaN,v=NaN;return}const l=Math.hypot(s.value/2-e,o.value/2-n),C=Math.atan2(n-o.value/2,e-s.value/2);if(l>b.value){i=NaN,v=NaN;return}[e,n]=[s.value/2+l*Math.cos(r.value-C),o.value/2-l*Math.sin(r.value-C)],!isNaN(i)&&!isNaN(v)&&(a.beginPath(),a.moveTo(i,v),a.lineTo(e,n),a.stroke()),i=e,v=n})),setTimeout(()=>{const e=()=>Math.random()*200-100;for(let[n,l]of[[0,0],[-200,100],[100,300],[70,-250]])a.beginPath(),a.moveTo(s.value/2+n+e(),o.value/2+l+e()),a.lineTo(s.value/2+n+e(),o.value/2+l+e()),a.stroke()})}),P("pointerdown",()=>m.value=!0),P("pointerup",()=>m.value=!1),F(()=>r.value+=h.value),(w,t)=>(B(),H(E,null,{indicator:N(()=>[I(Y,null,{default:N(()=>[c("span",{class:"button",onClick:t[0]||(t[0]=u=>h.value-=Math.min(Math.PI/1440))}," Slower "),q,c("span",{class:"button",onClick:t[1]||(t[1]=u=>h.value+=Math.min(Math.PI/1440))}," Faster "),I(V),c("span",{class:"button",onClick:t[2]||(t[2]=(...u)=>f.value&&f.value(...u))},"Clear")]),_:1})]),default:N(()=>[c("canvas",{ref_key:"canvas",ref:M,class:"canvas",style:L(`transform: rotate(${r.value}rad)`)},null,4)]),_:1}))}});var ta=G(J,[["__scopeId","data-v-99a1931e"]]);export{ta as default};
