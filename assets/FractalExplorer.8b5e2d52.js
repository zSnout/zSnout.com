import{d as y,m as v,G as ie,o as h,h as w,s as E,c as k,a as s,p as Z,j as q,b as x,as as ue,e as u,g as A,v as ee,C as se,ao as ce,A as de,at as M,au as fe,f as I,i as N,q as me}from"./index.ed7c8f42.js";import{_ as g,B as F,H as j,a as pe}from"./Modal.1ad2c1f2.js";import{F as ve}from"./Field.cee4aeb0.js";import{F as he}from"./useWebGL.0aafa8d8.js";import{s as _,u as be}from"./useMovableCanvas.cc0450ac.js";const _e={class:"field focusline second-layer"},ye=y({__name:"Dropdown",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:t}){const{modelValue:n}=e,l=v(n);return ie(l,o=>t("update:modelValue",o)),(o,i)=>(h(),w("select",_e,[E(o.$slots,"default",{},void 0,!0)]))}});var ge=g(ye,[["__scopeId","data-v-1e45b860"]]);const T=y({__name:"IconButton",setup(e){return(t,n)=>(h(),k(F,{center:"",style:{width:"2.5em",height:"2.25em"}},{default:s(()=>[E(t.$slots,"default")]),_:3}))}});const we={},xe=e=>(Z("data-v-0298e8c4"),e=e(),q(),e),Ve={class:"icon",viewBox:"0 0 485.064 485.064",xmlns:"http://www.w3.org/2000/svg"},ke=xe(()=>x("path",{d:`M458.736,181.097H26.334C11.793,181.097,0,192.884,0,207.425v70.215c0,14.541,11.787,26.328,26.334,26.328h432.402\r
      c14.541,0,26.328-11.787,26.328-26.328v-70.215C485.07,192.884,473.283,181.097,458.736,181.097z`},null,-1)),$e=[ke];function ze(e,t){return h(),w("svg",Ve,$e)}var Ce=g(we,[["render",ze],["__scopeId","data-v-0298e8c4"]]);const Oe={},Ie=e=>(Z("data-v-079820ed"),e=e(),q(),e),Se={class:"icon",viewBox:"0 0 60.364 60.364",xmlns:"http://www.w3.org/2000/svg"},Fe=Ie(()=>x("path",{d:`M54.454,23.18l-18.609-0.002L35.844,5.91C35.845,2.646,33.198,0,29.934,0c-3.263,0-5.909,2.646-5.909,5.91v17.269\r
		L5.91,23.178C2.646,23.179,0,25.825,0,29.088c0.002,3.264,2.646,5.909,5.91,5.909h18.115v19.457c0,3.267,2.646,5.91,5.91,5.91\r
		c3.264,0,5.909-2.646,5.91-5.908V34.997h18.611c3.262,0,5.908-2.645,5.908-5.907C60.367,25.824,57.718,23.178,54.454,23.18z`},null,-1)),Ee=[Fe];function Ae(e,t){return h(),w("svg",Se,Ee)}var je=g(Oe,[["render",Ae],["__scopeId","data-v-079820ed"]]);const Pe=["autocomplete","placeholder","type","value"],Le=y({__name:"InlineField",props:{modelValue:null,type:null,autocomplete:null,placeholder:null},emits:["update:modelValue"],setup(e){return(t,n)=>{var l,o;return h(),w("input",{class:"field",autocomplete:(l=e.autocomplete)!=null?l:"off",placeholder:e.placeholder,style:ue({width:e.modelValue.length+2+"ch"}),type:(o=e.type)!=null?o:"text",value:e.modelValue,onInput:n[0]||(n[0]=i=>t.$emit("update:modelValue",i.target.value))},null,44,Pe)}}});var Ue=g(Le,[["__scopeId","data-v-3d0155ac"]]);const De=y({__name:"InlineNumericField",props:{modelValue:null,autocomplete:null,placeholder:null},emits:["update:modelValue"],setup(e){return(t,n)=>(h(),k(Ue,{autocomplete:e.autocomplete,"model-value":""+e.modelValue,placeholder:e.placeholder,type:"number","onUpdate:modelValue":n[0]||(n[0]=l=>t.$emit("update:modelValue",+l))},null,8,["autocomplete","model-value","placeholder"]))}});const Re=y({__name:"Incrementable",props:{modelValue:null,decrement:{type:Function,default:e=>e-1},increment:{type:Function,default:e=>e+1},label:null},emits:["update:modelValue"],setup(e){function t({target:n}){var l;(l=n.querySelector("input"))==null||l.focus()}return(n,l)=>(h(),k(j,null,{default:s(()=>[u(T,{onClick:l[0]||(l[0]=o=>n.$emit("update:modelValue",e.decrement(e.modelValue)))},{default:s(()=>[u(Ce)]),_:1}),x("p",{class:"label",onClick:t},[A(ee(e.label)+" ",1),u(De,{"model-value":e.modelValue,"onUpdate:modelValue":l[1]||(l[1]=o=>n.$emit("update:modelValue",o))},null,8,["model-value"])]),u(T,{onClick:l[2]||(l[2]=o=>n.$emit("update:modelValue",e.increment(e.modelValue)))},{default:s(()=>[u(je)]),_:1})]),_:1}))}});var H=g(Re,[["__scopeId","data-v-6b56d56b"]]);function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function Me(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,l)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q(Object(n),!0).forEach(function(l){Ne(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}var W={addCSS:!0,thumbWidth:15,watch:!0};function Te(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}function He(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}var $=function(e){return e!=null?e.constructor:null},P=function(e,t){return!!(e&&t&&e instanceof t)},te=function(e){return e==null},ne=function(e){return $(e)===Object},Ke=function(e){return $(e)===Number&&!Number.isNaN(e)},le=function(e){return $(e)===String},Qe=function(e){return $(e)===Boolean},Ge=function(e){return $(e)===Function},oe=function(e){return Array.isArray(e)},ae=function(e){return P(e,NodeList)},We=function(e){return P(e,Element)},Xe=function(e){return P(e,Event)},Je=function(e){return te(e)||(le(e)||oe(e)||ae(e))&&!e.length||ne(e)&&!Object.keys(e).length},d={nullOrUndefined:te,object:ne,number:Ke,string:le,boolean:Qe,function:Ge,array:oe,nodeList:ae,element:We,event:Xe,empty:Je};function Ye(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function Ze(e,t){if(1>t){var n=Ye(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}var qe=function(){function e(t,n){Be(this,e),d.element(t)?this.element=t:d.string(t)&&(this.element=document.querySelector(t)),d.element(this.element)&&d.empty(this.element.rangeTouch)&&(this.config=G({},W,{},n),this.init())}return Me(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(t){var n=this,l=t?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(o){n.element[l](o,function(i){return n.set(i)},!1)})}},{key:"get",value:function(t){if(!e.enabled||!d.event(t))return null;var n,l=t.target,o=t.changedTouches[0],i=parseFloat(l.getAttribute("min"))||0,a=parseFloat(l.getAttribute("max"))||100,c=parseFloat(l.getAttribute("step"))||1,f=l.getBoundingClientRect(),b=100/f.width*(this.config.thumbWidth/2)/100;return 0>(n=100/f.width*(o.clientX-f.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*b:50<n&&(n+=2*(n-50)*b),i+Ze(n/100*(a-i),c)}},{key:"set",value:function(t){e.enabled&&d.event(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),He(t.target,t.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},l=null;if(d.empty(t)||d.string(t)?l=Array.from(document.querySelectorAll(d.string(t)?t:'input[type="range"]')):d.element(t)?l=[t]:d.nodeList(t)?l=Array.from(t):d.array(t)&&(l=t.filter(d.element)),d.empty(l))return null;var o=G({},W,{},n);if(d.string(t)&&o.watch){var i=new MutationObserver(function(a){Array.from(a).forEach(function(c){Array.from(c.addedNodes).forEach(function(f){d.element(f)&&Te(f,t)&&new e(f,o)})})});i.observe(document.body,{childList:!0,subtree:!0})}return l.map(function(a){return new e(a,n)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}();const et=["autocomplete","max","min","step","value"],tt=y({__name:"InlineRangeField",props:{modelValue:null,autocomplete:null,min:null,max:null,step:null},emits:["update:modelValue"],setup(e){let t;de(()=>t==null?void 0:t());const n=v();return se(()=>{const l=ce(n);if(!l)return;const o=new qe(l);t=()=>o.destroy}),(l,o)=>{var i;return h(),w("input",{ref_key:"field",ref:n,class:"field",autocomplete:(i=e.autocomplete)!=null?i:"off",max:e.max,min:e.min,step:e.step,value:e.modelValue,type:"range",onInput:o[0]||(o[0]=a=>l.$emit("update:modelValue",+a.target.value))},null,40,et)}}});var X=g(tt,[["__scopeId","data-v-d801c520"]]);const nt={class:"label"},lt={class:"nowrap"},ot=y({__name:"Labeled",props:{label:null},setup(e){return(t,n)=>(h(),w("label",nt,[u(j,null,{default:s(()=>[x("span",lt,ee(e.label),1),E(t.$slots,"default",{},void 0,!0)]),_:3})]))}});var V=g(ot,[["__scopeId","data-v-c154c8f4"]]);let at={"+":2,"-":2,"*":3,"/":3,"**":4,"^":5};function J(e){return e=="("?0:at[e]||1}let rt={"+":"l","-":"l","*":"l","/":"l"};function it(e){return rt[e]||"r"}let ut=["+","-","*","/","^","("];function Y(e){return!ut.includes(e)}function st(e){let t=[],n=!1;for(;;){let a;if(e.length===0)break;(a=e.match(/^\d+(?:\.\d+)?/))?(n&&t.push("**"),n=!0,t.push(+a[0]),e=e.slice(a[0].length)):(a=e.match(/^(sin|cos|tan|exp|log|abs|min|max|rawsqr)/))?(n&&t.push("**"),n=!1,t.push(a[0]),e=e.slice(a[0].length)):(a=e.match(/^(pi|pz|ppz|sz|e|i|c|z)/))?(n&&t.push("**"),n=!0,t.push(a[0]),e=e.slice(a[0].length)):((a=e.match(/^[-+*\/^()]/))&&(n&&a[0]=="("&&t.push("**"),n=!1,a[0]==")"&&(n=!0),t.push(a[0])),e=e.slice(1))}let l=[],o=[],i;for(;i=t.shift();)if(typeof i=="number"||i.match(/^(pi|pz|ppz|sz|e|i|c|z)$/))l.push(i);else if(i==")"){for(;o[o.length-1]!="(";){let c=o[o.length-1];if(!c)return["z"];o.pop(),l.push(c)}if(o.pop()!="(")return["z"];let a=o[o.length-1];if(!a)continue;Y(a)&&(o.pop(),l.push(a))}else if(i=="("||Y(i))o.push(i);else{let a=i,c;for(;(c=o[o.length-1])&&c!="(";){let f=J(a),b=J(c);if(!(b>f||f==b&&it(a)=="l"))break;l.push((o.pop(),c))}o.push(a)}for(;i=o.pop();){if(i=="("||i==")")return["z"];l.push(i)}return l}function ct(e){try{let t=[];for(let n of e)if(typeof n=="number")t.push(`vec2(${n}, 0)`);else if(n=="i")t.push("vec2(0, 1)");else if(n=="pi")t.push("vec2(3.141592653589793, 0)");else if(n=="e")t.push("vec2(2.718281828459045, 0)");else if(n.match(/^(pz|ppz|sz|c|z)$/))t.push(n);else if(n=="+"||n=="-"){let l=t.pop(),o=t.pop();t.push(`${o} ${n} ${l}`)}else if(n=="*"||n=="**"||n=="/"||n=="^"||n=="min"||n=="max"){n=="/"?n="div":n=="^"?n="power":(n=="*"||n=="**")&&(n="mult");let l=t.pop(),o=t.pop();t.push(`${n}(${o}, ${l})`)}else(n=="sin"||n=="cos"||n=="tan"||n=="exp"||n=="log"||n=="abs"||n=="rawsqr")&&t.push(`${n}(${t.pop()})`);return t.length!=1?"z":t[0]}catch{return"z"}}function dt(e){return ct(st(e))}const ft=["autocomplete","checked","type"],mt=y({__name:"InlineCheckboxField",props:{modelValue:{type:Boolean},type:null,autocomplete:null},emits:["update:modelValue"],setup(e){return(t,n)=>{var l,o;return h(),w("input",{class:"field",autocomplete:(l=e.autocomplete)!=null?l:"off",checked:e.modelValue,type:(o=e.type)!=null?o:"checkbox",onChange:n[0]||(n[0]=i=>t.$emit("update:modelValue",i.target.checked))},null,40,ft)}}});var pt=g(mt,[["__scopeId","data-v-5a55106d"]]);const vt=A("Apply Equation"),ht=x("option",{value:"rainbow"},"Rainbow",-1),bt=x("p",null,"Modifiers:",-1),_t=A(" Reset Position "),kt=y({__name:"FractalExplorer",setup(e){const t=M(100,5,1/0);_("detail",t);function n(r){return r<=10?5:r<=25?5*Math.ceil((r-5)/5):r<=50?25:50*Math.ceil((r-50)/50)}function l(r){return r<10?10:r<25?5*~~((r+5)/5):r<50?50:50*~~((r+50)/50)}const o=M(2,.1,1/0);_("limit",o);function i(r){return r<=2?Math.ceil(10*(r-.1))/10:Math.ceil(r-1)}function a(r){return r<2?~~(10*(r+.1))/10:~~(r+1)}const c=v("z^2+c");_("equation",c);const f=v("rainbow");_("theme",f);const b=v(0);_("colorOffset",b);const z=v(1);_("colorRepetition",z);const C=v(!1);_("modA",C);const L=v(!1);_("modB",L);const U=v(!1);_("modC",U);const D=v(!1);_("modD",D);const re="in vec2 pos;out vec4 color;uniform int detail;uniform float limit;uniform float colorOffset;uniform float colorRepetition;uniform bvec4 modifiers;float pi=3.1415926535;vec3 hsl2rgb(vec3 c){vec3 rgb=clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0,0.0,1.0);return c.z+c.y*(rgb-0.5)*(1.0-abs(2.0*c.z-1.0));}vec3 palette(float t){float hue=mod(2.0*colorRepetition*t+colorOffset,1.0);vec3 hsl=vec3(1.0-hue,1,0.5);if(modifiers[0])hsl.x=sin(hsl.x*pi);return hsl2rgb(hsl);}vec3 newtonPalette(float t){float hue=mod(t*colorRepetition/pi+colorOffset,1.0);return hsl2rgb(vec3(1.0-hue,1.0,0.5));}vec2 cube(vec2 a){float x2=a.x*a.x;float y2=a.y*a.y;float d=x2-y2;return vec2(a.x*(d-y2-y2),a.y*(x2+x2+d));}vec2 sqr(vec2 a){return vec2(a.x*a.x-a.y*a.y,2.0*a.x*a.y);}vec2 rawsqr(vec2 a){return a*a;}vec2 mult(vec2 a,vec2 b){float x=a.x*b.x-a.y*b.y;float y=a.x*b.y+a.y*b.x;return vec2(x,y);}vec2 div(vec2 a,vec2 b){float denom=1.0/(b.x*b.x+b.y*b.y);return vec2(a.x*b.x+a.y*b.y,a.y*b.x-a.x*b.y)*denom;}vec2 power(vec2 a,vec2 b){int count=int(b.x);if(count<=1)return a;vec2 result=a;for(int i=1;i<count;i++){result=mult(result,a);}return result;}void main(){vec2 z,pz,ppz,nz,c=pos;vec3 sz;color=vec4(0,0,0,1);for(int i=0;i<detail;i++){ppz=pz;pz=z;z={{EQ}};if(length(z)>limit){color=vec4(palette(float(i)*0.01),1);return;}}}",R=v();let O,S=v();function B(){O==null||O(),be(R,re.replace("{{EQ}}",dt(c.value))).then(r=>{r.useUniform("detail","i",t),r.useUniform("limit","f",o),r.useUniform("colorOffset","f",b),r.useUniform("colorRepetition","f",z),r.useUniform("modifiers","f",fe(()=>[+C.value,+L.value,+U.value,+D.value])),O=r.destroy,S.value=()=>{r.bounds.xStart.value=-2,r.bounds.xEnd.value=2,r.bounds.yStart.value=-2,r.bounds.yEnd.value=2}})}return B(),(r,m)=>(h(),k(he,null,{options:s(()=>[u(H,{modelValue:I(t),"onUpdate:modelValue":m[0]||(m[0]=p=>N(t)?t.value=p:null),decrement:n,increment:l,label:"Detail Level:"},null,8,["modelValue"]),u(H,{modelValue:I(o),"onUpdate:modelValue":m[1]||(m[1]=p=>N(o)?o.value=p:null),decrement:i,increment:a,label:"Fractal Size:"},null,8,["modelValue"]),u(V,{label:"Equation:"},{default:s(()=>[u(ve,{modelValue:c.value,"onUpdate:modelValue":m[2]||(m[2]=p=>c.value=p)},null,8,["modelValue"]),u(F,{style:{"white-space":"pre"},onClick:B},{default:s(()=>[vt]),_:1})]),_:1}),u(V,{label:"Theme:"},{default:s(()=>[u(ge,{modelValue:f.value,"onUpdate:modelValue":m[3]||(m[3]=p=>f.value=p)},{default:s(()=>[ht]),_:1},8,["modelValue"])]),_:1}),u(V,{label:"Color Offset:"},{default:s(()=>[u(X,{modelValue:b.value,"onUpdate:modelValue":m[4]||(m[4]=p=>b.value=p),max:1,min:0,step:"any"},null,8,["modelValue"])]),_:1}),u(V,{label:"Color Repetition:"},{default:s(()=>[u(X,{modelValue:z.value,"onUpdate:modelValue":m[5]||(m[5]=p=>z.value=p),max:10,min:-10,step:"any"},null,8,["modelValue"])]),_:1}),u(j,null,{default:s(()=>[bt,u(pe),u(V,{label:"A:"},{default:s(()=>[u(pt,{modelValue:C.value,"onUpdate:modelValue":m[6]||(m[6]=p=>C.value=p)},null,8,["modelValue"])]),_:1})]),_:1})]),buttons:s(()=>[I(S)?(h(),k(F,{key:0,onClick:I(S)},{default:s(()=>[_t]),_:1},8,["onClick"])):me("",!0)]),default:s(()=>[x("canvas",{ref_key:"canvas",ref:R},null,512)]),_:1}))}});export{kt as default};
