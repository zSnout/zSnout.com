import{d as h,m as V,G as U,o as m,h as g,s as z,c as w,a as i,p as N,j as E,b as _,e as c,g as $,v as P,ae as R,as as H,at as k,f as y,i as x}from"./index.d0c29e8f.js";import{_ as b,B as Q,H as O}from"./Modal.56ebdf9d.js";import{F as T}from"./useWebGL.d5b10113.js";import{s as C,a as F,u as G}from"./useMovableCanvas.a6650bfd.js";const j={class:"field focusline second-layer"},A=h({__name:"Dropdown",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:l}){const{modelValue:t}=e,a=V(t);return U(a,n=>l("update:modelValue",n)),(n,r)=>(m(),g("select",j,[z(n.$slots,"default",{},void 0,!0)]))}});var J=b(A,[["__scopeId","data-v-1e45b860"]]);const S=h({__name:"IconButton",setup(e){return(l,t)=>(m(),w(Q,{center:"",style:{width:"2.5em",height:"2.25em"}},{default:i(()=>[z(l.$slots,"default")]),_:3}))}});const K={},W=e=>(N("data-v-0298e8c4"),e=e(),E(),e),X={class:"icon",viewBox:"0 0 485.064 485.064",xmlns:"http://www.w3.org/2000/svg"},Y=W(()=>_("path",{d:`M458.736,181.097H26.334C11.793,181.097,0,192.884,0,207.425v70.215c0,14.541,11.787,26.328,26.334,26.328h432.402\r
      c14.541,0,26.328-11.787,26.328-26.328v-70.215C485.07,192.884,473.283,181.097,458.736,181.097z`},null,-1)),Z=[Y];function q(e,l){return m(),g("svg",X,Z)}var ee=b(K,[["render",q],["__scopeId","data-v-0298e8c4"]]);const te={},le=e=>(N("data-v-079820ed"),e=e(),E(),e),ne={class:"icon",viewBox:"0 0 60.364 60.364",xmlns:"http://www.w3.org/2000/svg"},ae=le(()=>_("path",{d:`M54.454,23.18l-18.609-0.002L35.844,5.91C35.845,2.646,33.198,0,29.934,0c-3.263,0-5.909,2.646-5.909,5.91v17.269\r
		L5.91,23.178C2.646,23.179,0,25.825,0,29.088c0.002,3.264,2.646,5.909,5.91,5.909h18.115v19.457c0,3.267,2.646,5.91,5.91,5.91\r
		c3.264,0,5.909-2.646,5.91-5.908V34.997h18.611c3.262,0,5.908-2.645,5.908-5.907C60.367,25.824,57.718,23.178,54.454,23.18z`},null,-1)),oe=[ae];function se(e,l){return m(),g("svg",ne,oe)}var re=b(te,[["render",se],["__scopeId","data-v-079820ed"]]);const ue=h({__name:"Incrementable",props:{modelValue:null,decrement:{type:Function,default:e=>e-1},increment:{type:Function,default:e=>e+1}},emits:["update:modelValue"],setup(e){function l({target:t}){var a;(a=t.querySelector("input"))==null||a.focus()}return(t,a)=>(m(),w(O,null,{default:i(()=>[c(S,{onClick:a[0]||(a[0]=n=>t.$emit("update:modelValue",e.decrement(e.modelValue)))},{default:i(()=>[c(ee)]),_:1}),_("p",{class:"label",onClick:l},[z(t.$slots,"default",{},()=>[$(P(e.modelValue),1)],!0)]),c(S,{onClick:a[1]||(a[1]=n=>t.$emit("update:modelValue",e.increment(e.modelValue)))},{default:i(()=>[c(re)]),_:1})]),_:3}))}});var B=b(ue,[["__scopeId","data-v-83d541b2"]]);const ie=["autocomplete","placeholder","type","value"],ce=h({__name:"InlineField",props:{modelValue:null,type:null,autocomplete:null,placeholder:null},emits:["update:modelValue"],setup(e){return U(R(e,"modelValue"),console.log),(t,a)=>{var n,r;return m(),g("input",{class:"field",autocomplete:(n=e.autocomplete)!=null?n:"off",placeholder:e.placeholder,style:H({width:e.modelValue.length+2+"ch"}),type:(r=e.type)!=null?r:"text",value:e.modelValue,onInput:a[0]||(a[0]=o=>t.$emit("update:modelValue",o.target.value))},null,44,ie)}}});var de=b(ce,[["__scopeId","data-v-681ba412"]]);const M=h({__name:"InlineNumericField",props:{modelValue:null,autocomplete:null,placeholder:null},emits:["update:modelValue"],setup(e){return(l,t)=>(m(),w(de,{autocomplete:e.autocomplete,"model-value":""+e.modelValue,placeholder:e.placeholder,type:"number","onUpdate:modelValue":t[0]||(t[0]=a=>l.$emit("update:modelValue",+a))},null,8,["autocomplete","model-value","placeholder"]))}});let pe={"+":2,"-":2,"*":3,"/":3,"**":4,"^":5};function D(e){return e=="("?0:pe[e]||1}let me={"+":"l","-":"l","*":"l","/":"l"};function fe(e){return me[e]||"r"}let he=["+","-","*","/","^","("];function L(e){return!he.includes(e)}function ve(e){let l=[],t=!1;for(;;){let o;if(e.length===0)break;(o=e.match(/^\d+(?:\.\d+)?/))?(t&&l.push("**"),t=!0,l.push(+o[0]),e=e.slice(o[0].length)):(o=e.match(/^(sin|cos|tan|exp|log|abs|min|max|rawsqr)/))?(t&&l.push("**"),t=!1,l.push(o[0]),e=e.slice(o[0].length)):(o=e.match(/^(pi|pz|ppz|sz|e|i|c|z)/))?(t&&l.push("**"),t=!0,l.push(o[0]),e=e.slice(o[0].length)):((o=e.match(/^[-+*\/^()]/))&&(t&&o[0]=="("&&l.push("**"),t=!1,o[0]==")"&&(t=!0),l.push(o[0])),e=e.slice(1))}let a=[],n=[],r;for(;r=l.shift();)if(typeof r=="number"||r.match(/^(pi|pz|ppz|sz|e|i|c|z)$/))a.push(r);else if(r==")"){for(;n[n.length-1]!="(";){let d=n[n.length-1];if(!d)return["z"];n.pop(),a.push(d)}if(n.pop()!="(")return["z"];let o=n[n.length-1];if(!o)continue;L(o)&&(n.pop(),a.push(o))}else if(r=="("||L(r))n.push(r);else{let o=r,d;for(;(d=n[n.length-1])&&d!="(";){let f=D(o),v=D(d);if(!(v>f||f==v&&fe(o)=="l"))break;a.push((n.pop(),d))}n.push(o)}for(;r=n.pop();){if(r=="("||r==")")return["z"];a.push(r)}return a}function _e(e){try{let l=[];for(let t of e)if(typeof t=="number")l.push(`vec2(${t}, 0)`);else if(t=="i")l.push("vec2(0, 1)");else if(t=="pi")l.push("vec2(3.141592653589793, 0)");else if(t=="e")l.push("vec2(2.718281828459045, 0)");else if(t.match(/^(pz|ppz|sz|c|z)$/))l.push(t);else if(t=="+"||t=="-"){let a=l.pop(),n=l.pop();l.push(`${n} ${t} ${a}`)}else if(t=="*"||t=="**"||t=="/"||t=="^"||t=="min"||t=="max"){t=="/"?t="div":t=="^"?t="power":(t=="*"||t=="**")&&(t="mult");let a=l.pop(),n=l.pop();l.push(`${t}(${n}, ${a})`)}else(t=="sin"||t=="cos"||t=="tan"||t=="exp"||t=="log"||t=="abs"||t=="rawsqr")&&l.push(`${t}(${l.pop()})`);return l.length!=1?"z":l[0]}catch{return"z"}}function be(e){return _e(ve(e))}const ye=$(" Detail Level: "),xe=$(" Fractal Size: "),Ve=_("option",{value:"rainbow"},"Rainbow",-1),Ie=h({__name:"FractalExplorer",setup(e){const l=k(100,5,1/0);C("detail",l);function t(s){return s<=10?5:s<=25?5*Math.ceil((s-5)/5):s<=50?25:50*Math.ceil((s-50)/50)}function a(s){return s<10?10:s<25?5*~~((s+5)/5):s<50?50:50*~~((s+50)/50)}const n=k(2,.1,1/0);C("limit",n);function r(s){return s<=2?Math.ceil(10*(s-.1))/10:Math.ceil(s-1)}function o(s){return s<2?~~(10*(s+.1))/10:~~(s+1)}const d="in vec2 pos;out vec4 color;uniform int detail;uniform float limit;float pi=3.1415926535;vec3 hsl2rgb(vec3 c){vec3 rgb=clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0,0.0,1.0);return c.z+c.y*(rgb-0.5)*(1.0-abs(2.0*c.z-1.0));}vec3 palette(float t){float hue=mod(2.0*t,1.0);return hsl2rgb(vec3(1.0-hue,1.0,0.5));}vec3 newtonPalette(float t){float hue=t/pi;return hsl2rgb(vec3(1.0-hue,1.0,0.5));}vec2 cube(vec2 a){float x2=a.x*a.x;float y2=a.y*a.y;float d=x2-y2;return vec2(a.x*(d-y2-y2),a.y*(x2+x2+d));}vec2 sqr(vec2 a){return vec2(a.x*a.x-a.y*a.y,2.0*a.x*a.y);}vec2 rawsqr(vec2 a){return a*a;}vec2 mult(vec2 a,vec2 b){float x=a.x*b.x-a.y*b.y;float y=a.x*b.y+a.y*b.x;return vec2(x,y);}vec2 div(vec2 a,vec2 b){float denom=1.0/(b.x*b.x+b.y*b.y);return vec2(a.x*b.x+a.y*b.y,a.y*b.x-a.x*b.y)*denom;}vec2 power(vec2 a,vec2 b){int count=int(b.x);if(count<=1)return a;vec2 result=a;for(int i=1;i<count;i++){result=mult(result,a);}return result;}void main(){vec2 z,pz,ppz,nz,c=pos;vec3 sz;color=vec4(0,0,0,1);for(int i=0;i<detail;i++){ppz=pz;pz=z;z={{EQ}};if(length(z)>limit){color=vec4(palette(float(i)*0.01),1);return;}}}",f=V("rainbow");F("theme",f);const v=V("z^2+c");F("equation",v);const I=V();return G(I,d.replace("{{EQ}}",be(v.value))).then(s=>{s.useUniform("detail","i",l),s.useUniform("limit","f",n)}),(s,u)=>(m(),w(T,null,{options:i(()=>[c(B,{modelValue:y(l),"onUpdate:modelValue":u[1]||(u[1]=p=>x(l)?l.value=p:null),decrement:t,increment:a},{default:i(()=>[ye,c(M,{modelValue:y(l),"onUpdate:modelValue":u[0]||(u[0]=p=>x(l)?l.value=p:null)},null,8,["modelValue"])]),_:1},8,["modelValue"]),c(B,{modelValue:y(n),"onUpdate:modelValue":u[3]||(u[3]=p=>x(n)?n.value=p:null),decrement:r,increment:o},{default:i(()=>[xe,c(M,{modelValue:y(n),"onUpdate:modelValue":u[2]||(u[2]=p=>x(n)?n.value=p:null)},null,8,["modelValue"])]),_:1},8,["modelValue"]),c(O,{stretch:""},{default:i(()=>[c(J,{modelValue:f.value,"onUpdate:modelValue":u[4]||(u[4]=p=>f.value=p)},{default:i(()=>[Ve]),_:1},8,["modelValue"])]),_:1})]),default:i(()=>[_("canvas",{ref_key:"canvas",ref:I},null,512)]),_:1}))}});export{Ie as default};
