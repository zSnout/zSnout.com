import{a as c,B as v,V as _}from"./Modal.b637e5ba.js";import{D as V}from"./DocumentDisplay.3ca2c729.js";import{F as d}from"./Field.7a69ece7.js";import{L as i}from"./Labeled.7f2b9c61.js";import{u as w}from"./useApi.9f2beb7d.js";import{d as y,k as r,c as g,w as s,o as p,a as k,b as a,f as B,t as b,m as x,e as C,aC as D,aB as I,aD as L}from"./index.e01a32a1.js";import{_ as N}from"./LabelGrid.218a1d5a.js";const S={style:{"min-width":"min(500px, 100%)"}},U=C("Log In"),$={key:0},O=y({__name:"LogIn",setup(E){const n=r(""),u=r(""),o=r(""),m=r(!1);async function f(){m.value=!0;const t=await w({api:"account",method:"POST",body:{username:n.value,password:u.value},resultKeys:["session","username"],desc:"log users in"});t instanceof Error?o.value=t.message:(D.value=t.session,I.value=t.username,L.replace("/")),m.value=!1}return(t,e)=>(p(),g(V,{center:""},{default:s(()=>[k("form",S,[a(_,null,{default:s(()=>[a(N,null,{default:s(()=>[a(i,{label:"Username"},{default:s(()=>[a(d,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=l=>n.value=l),autocomplete:"username",maxlength:"32",placeholder:"Username...",onInput:e[1]||(e[1]=l=>o.value="")},null,8,["modelValue"])]),_:1}),a(i,{label:"Password"},{default:s(()=>[a(d,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=l=>u.value=l),autocomplete:"password",placeholder:"Password...",type:"password",onInput:e[3]||(e[3]=l=>o.value="")},null,8,["modelValue"])]),_:1})]),_:1}),a(c,{size:2}),a(v,{onClick:f},{default:s(()=>[U]),_:1}),o.value?(p(),B("p",$,"Error: "+b(o.value),1)):x("",!0)]),_:1})])]),_:1}))}});export{O as default};
