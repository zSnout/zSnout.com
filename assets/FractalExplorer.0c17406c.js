import{d as v,m as x,G as Q,o as f,h as w,s as $,c as V,a as c,p as U,j as B,b as h,as as R,e as u,g as M,v as D,at as I,f as k,i as C,au as A}from"./index.00d543b3.js";import{_ as b,B as E,H as N}from"./Modal.b8bb3089.js";import{F as G}from"./useWebGL.8a9cc7f6.js";import{s as y,u as j}from"./useMovableCanvas.2e89201a.js";import{F as J}from"./Field.4f12476f.js";const K={class:"field focusline second-layer"},W=v({__name:"Dropdown",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:l}){const{modelValue:t}=e,n=x(t);return Q(n,a=>l("update:modelValue",a)),(a,r)=>(f(),w("select",K,[$(a.$slots,"default",{},void 0,!0)]))}});var X=b(W,[["__scopeId","data-v-1e45b860"]]);const F=v({__name:"IconButton",setup(e){return(l,t)=>(f(),V(E,{center:"",style:{width:"2.5em",height:"2.25em"}},{default:c(()=>[$(l.$slots,"default")]),_:3}))}});const Y={},Z=e=>(U("data-v-0298e8c4"),e=e(),B(),e),q={class:"icon",viewBox:"0 0 485.064 485.064",xmlns:"http://www.w3.org/2000/svg"},ee=Z(()=>h("path",{d:`M458.736,181.097H26.334C11.793,181.097,0,192.884,0,207.425v70.215c0,14.541,11.787,26.328,26.334,26.328h432.402\r
      c14.541,0,26.328-11.787,26.328-26.328v-70.215C485.07,192.884,473.283,181.097,458.736,181.097z`},null,-1)),te=[ee];function le(e,l){return f(),w("svg",q,te)}var ae=b(Y,[["render",le],["__scopeId","data-v-0298e8c4"]]);const ne={},oe=e=>(U("data-v-079820ed"),e=e(),B(),e),se={class:"icon",viewBox:"0 0 60.364 60.364",xmlns:"http://www.w3.org/2000/svg"},re=oe(()=>h("path",{d:`M54.454,23.18l-18.609-0.002L35.844,5.91C35.845,2.646,33.198,0,29.934,0c-3.263,0-5.909,2.646-5.909,5.91v17.269\r
		L5.91,23.178C2.646,23.179,0,25.825,0,29.088c0.002,3.264,2.646,5.909,5.91,5.909h18.115v19.457c0,3.267,2.646,5.91,5.91,5.91\r
		c3.264,0,5.909-2.646,5.91-5.908V34.997h18.611c3.262,0,5.908-2.645,5.908-5.907C60.367,25.824,57.718,23.178,54.454,23.18z`},null,-1)),ue=[re];function ce(e,l){return f(),w("svg",se,ue)}var ie=b(ne,[["render",ce],["__scopeId","data-v-079820ed"]]);const de=["autocomplete","placeholder","type","value"],pe=v({__name:"InlineField",props:{modelValue:null,type:null,autocomplete:null,placeholder:null},emits:["update:modelValue"],setup(e){return(l,t)=>{var n,a;return f(),w("input",{class:"field",autocomplete:(n=e.autocomplete)!=null?n:"off",placeholder:e.placeholder,style:R({width:e.modelValue.length+2+"ch"}),type:(a=e.type)!=null?a:"text",value:e.modelValue,onInput:t[0]||(t[0]=r=>l.$emit("update:modelValue",r.target.value))},null,44,de)}}});var fe=b(pe,[["__scopeId","data-v-3d0155ac"]]);const P=v({__name:"InlineNumericField",props:{modelValue:null,autocomplete:null,placeholder:null},emits:["update:modelValue"],setup(e){return(l,t)=>(f(),V(fe,{autocomplete:e.autocomplete,"model-value":""+e.modelValue,placeholder:e.placeholder,type:"number","onUpdate:modelValue":t[0]||(t[0]=n=>l.$emit("update:modelValue",+n))},null,8,["autocomplete","model-value","placeholder"]))}});const me=v({__name:"Incrementable",props:{modelValue:null,decrement:{type:Function,default:e=>e-1},increment:{type:Function,default:e=>e+1},label:null},emits:["update:modelValue"],setup(e){function l({target:t}){var n;(n=t.querySelector("input"))==null||n.focus()}return(t,n)=>(f(),V(N,null,{default:c(()=>[u(F,{onClick:n[0]||(n[0]=a=>t.$emit("update:modelValue",e.decrement(e.modelValue)))},{default:c(()=>[u(ae)]),_:1}),h("p",{class:"label",onClick:l},[M(D(e.label)+" ",1),u(P,{"model-value":e.modelValue,"onUpdate:modelValue":n[1]||(n[1]=a=>t.$emit("update:modelValue",a))},null,8,["model-value"])]),u(F,{onClick:n[2]||(n[2]=a=>t.$emit("update:modelValue",e.increment(e.modelValue)))},{default:c(()=>[u(ie)]),_:1})]),_:1}))}});var S=b(me,[["__scopeId","data-v-6b56d56b"]]);let _e={"+":2,"-":2,"*":3,"/":3,"**":4,"^":5};function L(e){return e=="("?0:_e[e]||1}let ve={"+":"l","-":"l","*":"l","/":"l"};function he(e){return ve[e]||"r"}let be=["+","-","*","/","^","("];function O(e){return!be.includes(e)}function ye(e){let l=[],t=!1;for(;;){let s;if(e.length===0)break;(s=e.match(/^\d+(?:\.\d+)?/))?(t&&l.push("**"),t=!0,l.push(+s[0]),e=e.slice(s[0].length)):(s=e.match(/^(sin|cos|tan|exp|log|abs|min|max|rawsqr)/))?(t&&l.push("**"),t=!1,l.push(s[0]),e=e.slice(s[0].length)):(s=e.match(/^(pi|pz|ppz|sz|e|i|c|z)/))?(t&&l.push("**"),t=!0,l.push(s[0]),e=e.slice(s[0].length)):((s=e.match(/^[-+*\/^()]/))&&(t&&s[0]=="("&&l.push("**"),t=!1,s[0]==")"&&(t=!0),l.push(s[0])),e=e.slice(1))}let n=[],a=[],r;for(;r=l.shift();)if(typeof r=="number"||r.match(/^(pi|pz|ppz|sz|e|i|c|z)$/))n.push(r);else if(r==")"){for(;a[a.length-1]!="(";){let i=a[a.length-1];if(!i)return["z"];a.pop(),n.push(i)}if(a.pop()!="(")return["z"];let s=a[a.length-1];if(!s)continue;O(s)&&(a.pop(),n.push(s))}else if(r=="("||O(r))a.push(r);else{let s=r,i;for(;(i=a[a.length-1])&&i!="(";){let m=L(s),_=L(i);if(!(_>m||m==_&&he(s)=="l"))break;n.push((a.pop(),i))}a.push(s)}for(;r=a.pop();){if(r=="("||r==")")return["z"];n.push(r)}return n}function xe(e){try{let l=[];for(let t of e)if(typeof t=="number")l.push(`vec2(${t}, 0)`);else if(t=="i")l.push("vec2(0, 1)");else if(t=="pi")l.push("vec2(3.141592653589793, 0)");else if(t=="e")l.push("vec2(2.718281828459045, 0)");else if(t.match(/^(pz|ppz|sz|c|z)$/))l.push(t);else if(t=="+"||t=="-"){let n=l.pop(),a=l.pop();l.push(`${a} ${t} ${n}`)}else if(t=="*"||t=="**"||t=="/"||t=="^"||t=="min"||t=="max"){t=="/"?t="div":t=="^"?t="power":(t=="*"||t=="**")&&(t="mult");let n=l.pop(),a=l.pop();l.push(`${t}(${a}, ${n})`)}else(t=="sin"||t=="cos"||t=="tan"||t=="exp"||t=="log"||t=="abs"||t=="rawsqr")&&l.push(`${t}(${l.pop()})`);return l.length!=1?"z":l[0]}catch{return"z"}}function we(e){return xe(ye(e))}const Ve={class:"label"},ge={class:"nowrap"},$e=v({__name:"Labeled",props:{label:null},setup(e){return(l,t)=>(f(),w("label",Ve,[u(N,null,{default:c(()=>[h("span",ge,D(e.label),1),$(l.$slots,"default",{},void 0,!0)]),_:3})]))}});var g=b($e,[["__scopeId","data-v-c154c8f4"]]);const ze=h("hr",null,null,-1),Ie=h("option",{value:"rainbow"},"Rainbow",-1),ke=M("Apply Equation"),Ue=v({__name:"FractalExplorer",setup(e){const l=I(100,5,1/0);y("detail",l);function t(o){return o<=10?5:o<=25?5*Math.ceil((o-5)/5):o<=50?25:50*Math.ceil((o-50)/50)}function n(o){return o<10?10:o<25?5*~~((o+5)/5):o<50?50:50*~~((o+50)/50)}const a=I(2,.1,1/0);y("limit",a);function r(o){return o<=2?Math.ceil(10*(o-.1))/10:Math.ceil(o-1)}function s(o){return o<2?~~(10*(o+.1))/10:~~(o+1)}const i=x("rainbow");y("theme",i);const m=x(0);y("colorOffset",m);const _=x("z^2+c");y("equation",_);const T="in vec2 pos;out vec4 color;uniform int detail;uniform float limit;uniform float colorOffset;float pi=3.1415926535;vec3 hsl2rgb(vec3 c){vec3 rgb=clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0,0.0,1.0);return c.z+c.y*(rgb-0.5)*(1.0-abs(2.0*c.z-1.0));}vec3 palette(float t){float hue=mod(2.0*t+colorOffset,1.0);return hsl2rgb(vec3(1.0-hue,1.0,0.5));}vec3 newtonPalette(float t){float hue=mod(t/pi+colorOffset,1.0);return hsl2rgb(vec3(1.0-hue,1.0,0.5));}vec2 cube(vec2 a){float x2=a.x*a.x;float y2=a.y*a.y;float d=x2-y2;return vec2(a.x*(d-y2-y2),a.y*(x2+x2+d));}vec2 sqr(vec2 a){return vec2(a.x*a.x-a.y*a.y,2.0*a.x*a.y);}vec2 rawsqr(vec2 a){return a*a;}vec2 mult(vec2 a,vec2 b){float x=a.x*b.x-a.y*b.y;float y=a.x*b.y+a.y*b.x;return vec2(x,y);}vec2 div(vec2 a,vec2 b){float denom=1.0/(b.x*b.x+b.y*b.y);return vec2(a.x*b.x+a.y*b.y,a.y*b.x-a.x*b.y)*denom;}vec2 power(vec2 a,vec2 b){int count=int(b.x);if(count<=1)return a;vec2 result=a;for(int i=1;i<count;i++){result=mult(result,a);}return result;}void main(){vec2 z,pz,ppz,nz,c=pos;vec3 sz;color=vec4(0,0,0,1);for(int i=0;i<detail;i++){ppz=pz;pz=z;z={{EQ}};if(length(z)>limit){color=vec4(palette(float(i)*0.01),1);return;}}}",z=x(),H=()=>A.go(0);return j(z,T.replace("{{EQ}}",we(_.value))).then(o=>{o.useUniform("detail","i",l),o.useUniform("limit","f",a),o.useUniform("colorOffset","f",m)}),(o,d)=>(f(),V(G,null,{options:c(()=>[u(S,{modelValue:k(l),"onUpdate:modelValue":d[0]||(d[0]=p=>C(l)?l.value=p:null),decrement:t,increment:n,label:"Detail Level:"},null,8,["modelValue"]),u(S,{modelValue:k(a),"onUpdate:modelValue":d[1]||(d[1]=p=>C(a)?a.value=p:null),decrement:r,increment:s,label:"Fractal Size:"},null,8,["modelValue"]),ze,u(g,{label:"Theme:"},{default:c(()=>[u(X,{modelValue:i.value,"onUpdate:modelValue":d[2]||(d[2]=p=>i.value=p)},{default:c(()=>[Ie]),_:1},8,["modelValue"])]),_:1}),u(g,{label:"Equation:"},{default:c(()=>[u(J,{modelValue:_.value,"onUpdate:modelValue":d[3]||(d[3]=p=>_.value=p)},null,8,["modelValue"]),u(E,{style:{"white-space":"pre"},onClick:H},{default:c(()=>[ke]),_:1})]),_:1}),u(g,{label:"Color Offset:"},{default:c(()=>[u(P,{modelValue:m.value,"onUpdate:modelValue":d[4]||(d[4]=p=>m.value=p),type:"range"},null,8,["modelValue"])]),_:1})]),default:c(()=>[h("canvas",{ref_key:"canvas",ref:z},null,512)]),_:1}))}});export{Ue as default};
