import{_ as C,S as F,H as P,L as y,a as T,O as D,U as I,B as z,M as O}from"./Modal.624c06f8.js";import{d as U,m as $,o as x,h as N,e as i,a as c,f as m,R as V,c as G,q as M,s as v,b as H,F as W,g as K,w as g,ao as X,X as Y,ap as j}from"./index.c530de8c.js";const q=K("OK"),J={class:"content"},Q=U({__name:"FullscreenDisplay",props:{options:{type:Boolean}},setup(r){const a=$(!1);return(o,t)=>(x(),N(W,null,[i(m(I),{class:"nav",top:""},{default:c(()=>[i(F,null,{default:c(()=>[i(P,{class:"padding"},{default:c(()=>[i(m(V),{to:"/"},{default:c(()=>[i(y,{class:"logo",invert:""})]),_:1}),i(T),o.$slots.options?(x(),G(D,{key:0,class:"options fullscreen",role:"button",onClick:t[0]||(t[0]=n=>a.value=!a.value)})):M("",!0)]),_:1})]),_:1})]),_:1}),i(O,{open:a.value},{buttons:c(()=>[i(z,{cancel:"",onClick:t[1]||(t[1]=n=>a.value=!a.value)},{default:c(()=>[q]),_:1}),v(o.$slots,"buttons",{},void 0,!0)]),default:c(()=>[v(o.$slots,"options",{},void 0,!0)]),_:3},8,["open"]),H("div",J,[v(o.$slots,"default",{},void 0,!0)])],64))}});var ae=C(Q,[["__scopeId","data-v-3118e2e0"]]);function Z(r){const a=[];return j(()=>a.forEach(o=>o())),new Promise(o=>{const t=g(()=>{const n=X(r);if(n instanceof HTMLCanvasElement){const{width:l,height:p}=Y(n),e=[];typeof t=="function"&&a.push(t);const f=g(()=>{n.width=l.value*devicePixelRatio,n.height=p.value*devicePixelRatio,e.forEach(s=>s())});a.push(f),o({canvas:n,onDispose:s=>a.push(s),onResize:s=>e.push(s),size:{width:l,height:p}})}})})}function S(r,a,o){const t=r.createShader(r[`${a}_SHADER`]);if(!t)throw new Error("An error occurred while compiling a shader.");if(r.shaderSource(t,`#version 300 es
precision highp float;
`+o.trim()),r.compileShader(t),r.getShaderParameter(t,r.COMPILE_STATUS))return t;throw console.log(r.getShaderInfoLog(t)),r.deleteShader(t),new Error("An error occurred while compiling a shader.")}function ee(r,a,o){let t=r.createProgram();if(!t)throw new Error("An error occurred while creating a WebGL program.");let n=S(r,"VERTEX",a),l=S(r,"FRAGMENT",o);if(r.attachShader(t,n),r.attachShader(t,l),r.linkProgram(t),r.getProgramParameter(t,r.LINK_STATUS))return t;throw console.log(r.getProgramInfoLog(t)),r.deleteProgram(t),new Error("An error occurred while creating a WebGL program.")}const te=`
in vec2 _pos;
out vec2 pos;

void main() {
  gl_Position = vec4(pos = _pos, 0, 1);
}`;async function ne(r,a,o){var w;const t=await Z(r),{canvas:n,onResize:l,onDispose:p}=t,e=n.getContext("webgl2",{preserveDrawingBuffer:o==null?void 0:o.preserveDrawingBuffer});if(!e)throw new Error("An error occurred while initializing the context.");const f=ee(e,(w=o==null?void 0:o.vertShader)!=null?w:te,a);e.useProgram(f);const s=e.getAttribLocation(f,"_pos");e.enableVertexAttribArray(s);const A=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,A),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,1,1,0,0,0]),e.STATIC_DRAW),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0);function h(){e.isContextLost()||(e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.viewport(-n.width,-n.height,2*n.width,2*n.height),e.drawArrays(e.TRIANGLES,0,6))}let u=!1;const b=setInterval(()=>{u&&(u=!1,h())});p(()=>clearInterval(b)),l(h);function E(L,R,k){if(e.isContextLost())return;const _=e.getUniformLocation(f,L);if(!_)return;const B=g(()=>{let d=m(k);e.isContextLost()||(typeof d=="number"&&(d=[d]),!(d.length<1||d.length>4)&&(e[`uniform${d.length}${R}v`](_,d),u=!0))});p(B)}return Object.assign(t,{gl:e,program:f,render:h,useUniform:E})}export{ae as F,ne as u};
