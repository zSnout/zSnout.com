import{d as S,k as d,aa as x,a6 as D,a4 as y,B,r as F,j as C,a0 as z,o as H,c as R,w as N,b as k,a as c,P as $,p as j,g as E}from"./index.15748092.js";import{F as L}from"./FullscreenDisplay.7a2d1c8c.js";import{_ as V,a as Y,H as X}from"./BookmarkIcon.fd3553c6.js";import{u as q}from"./useCanvas.74f3fb2a.js";const A=p=>(j("data-v-58211ed6"),p=p(),E(),p),G=A(()=>c("span",null,"/",-1)),J=S({__name:"Turntable",setup(p){const M=d(),I=x(),f=d(!1),r=d(0),h=d(),m=D(Math.PI/360,Math.PI/1440,Math.PI/8);return q(M,{useDevicePixelRatio:!1}).then(w=>{const{canvas:t,onDispose:u,onResize:T,size:g}=w,{width:s,height:n}=g,a=t.getContext("2d"),P=y(()=>Math.min(s.value/2,n.value/2));if(!a)throw new Error("Your device doesn't support HTML5 canvases.");let i=NaN,v=NaN;a.translate(s.value/2,n.value/2);function _(){a.beginPath(),a.fillStyle="white",a.arc(s.value/2,n.value/2,P.value,0,2*Math.PI),a.fill()}h.value=_,_(),T(_),u(B(F({pointer:I,rotation:r}),({pointer:{x:e,y:o}})=>{if(!f.value){i=NaN,v=NaN;return}const l=Math.hypot(s.value/2-e,n.value/2-o),b=Math.atan2(o-n.value/2,e-s.value/2);if(l>P.value){i=NaN,v=NaN;return}[e,o]=[s.value/2+l*Math.cos(r.value-b),n.value/2-l*Math.sin(r.value-b)],!isNaN(i)&&!isNaN(v)&&(a.beginPath(),a.moveTo(i,v),a.lineTo(e,o),a.stroke()),i=e,v=o})),setTimeout(()=>{const e=()=>Math.random()*200-100;for(let[o,l]of[[0,0],[-200,100],[100,300],[70,-250]])a.beginPath(),a.moveTo(s.value/2+o+e(),n.value/2+l+e()),a.lineTo(s.value/2+o+e(),n.value/2+l+e()),a.stroke()})}),C("pointerdown",()=>f.value=!0),C("pointerup",()=>f.value=!1),z(()=>r.value+=m.value),(w,t)=>(H(),R(L,null,{indicator:N(()=>[k(X,null,{default:N(()=>[c("span",{class:"button",onClick:t[0]||(t[0]=u=>m.value-=Math.min(Math.PI/1440))}," Slower "),G,c("span",{class:"button",onClick:t[1]||(t[1]=u=>m.value+=Math.min(Math.PI/1440))}," Faster "),k(Y),c("span",{class:"button",onClick:t[2]||(t[2]=(...u)=>h.value&&h.value(...u))},"Clear")]),_:1})]),default:N(()=>[c("canvas",{ref_key:"canvas",ref:M,class:"canvas",style:$(`transform: rotate(${r.value}rad)`)},null,4)]),_:1}))}});var W=V(J,[["__scopeId","data-v-58211ed6"]]);export{W as default};
