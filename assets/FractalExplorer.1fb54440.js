import{d as _,m as b,G as le,o as v,h as w,s as E,c as V,a as f,p as G,j as W,b as x,as as oe,e as i,g as F,v as X,C as ae,ao as re,A as ue,at as L,f as O,i as R,q as ie}from"./index.fc58acbf.js";import{_ as y,B as I,H as J}from"./Modal.e96ad42d.js";import{F as se}from"./Field.191e0b6e.js";import{F as ce}from"./useWebGL.106d4d92.js";import{s as g,u as de}from"./useMovableCanvas.9d51f6d4.js";const fe={class:"field focusline second-layer"},pe=_({__name:"Dropdown",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:t}){const{modelValue:n}=e,l=b(n);return le(l,o=>t("update:modelValue",o)),(o,u)=>(v(),w("select",fe,[E(o.$slots,"default",{},void 0,!0)]))}});var me=y(pe,[["__scopeId","data-v-1e45b860"]]);const U=_({__name:"IconButton",setup(e){return(t,n)=>(v(),V(I,{center:"",style:{width:"2.5em",height:"2.25em"}},{default:f(()=>[E(t.$slots,"default")]),_:3}))}});const ve={},he=e=>(G("data-v-0298e8c4"),e=e(),W(),e),be={class:"icon",viewBox:"0 0 485.064 485.064",xmlns:"http://www.w3.org/2000/svg"},_e=he(()=>x("path",{d:`M458.736,181.097H26.334C11.793,181.097,0,192.884,0,207.425v70.215c0,14.541,11.787,26.328,26.334,26.328h432.402\r
      c14.541,0,26.328-11.787,26.328-26.328v-70.215C485.07,192.884,473.283,181.097,458.736,181.097z`},null,-1)),ye=[_e];function ge(e,t){return v(),w("svg",be,ye)}var we=y(ve,[["render",ge],["__scopeId","data-v-0298e8c4"]]);const xe={},Ve=e=>(G("data-v-079820ed"),e=e(),W(),e),$e={class:"icon",viewBox:"0 0 60.364 60.364",xmlns:"http://www.w3.org/2000/svg"},ke=Ve(()=>x("path",{d:`M54.454,23.18l-18.609-0.002L35.844,5.91C35.845,2.646,33.198,0,29.934,0c-3.263,0-5.909,2.646-5.909,5.91v17.269\r
		L5.91,23.178C2.646,23.179,0,25.825,0,29.088c0.002,3.264,2.646,5.909,5.91,5.909h18.115v19.457c0,3.267,2.646,5.91,5.91,5.91\r
		c3.264,0,5.909-2.646,5.91-5.908V34.997h18.611c3.262,0,5.908-2.645,5.908-5.907C60.367,25.824,57.718,23.178,54.454,23.18z`},null,-1)),ze=[ke];function Oe(e,t){return v(),w("svg",$e,ze)}var Se=y(xe,[["render",Oe],["__scopeId","data-v-079820ed"]]);const Ce=["autocomplete","placeholder","type","value"],Ie=_({__name:"InlineField",props:{modelValue:null,type:null,autocomplete:null,placeholder:null},emits:["update:modelValue"],setup(e){return(t,n)=>{var l,o;return v(),w("input",{class:"field",autocomplete:(l=e.autocomplete)!=null?l:"off",placeholder:e.placeholder,style:oe({width:e.modelValue.length+2+"ch"}),type:(o=e.type)!=null?o:"text",value:e.modelValue,onInput:n[0]||(n[0]=u=>t.$emit("update:modelValue",u.target.value))},null,44,Ce)}}});var Ee=y(Ie,[["__scopeId","data-v-3d0155ac"]]);const Fe=_({__name:"InlineNumericField",props:{modelValue:null,autocomplete:null,placeholder:null},emits:["update:modelValue"],setup(e){return(t,n)=>(v(),V(Ee,{autocomplete:e.autocomplete,"model-value":""+e.modelValue,placeholder:e.placeholder,type:"number","onUpdate:modelValue":n[0]||(n[0]=l=>t.$emit("update:modelValue",+l))},null,8,["autocomplete","model-value","placeholder"]))}});const je=_({__name:"Incrementable",props:{modelValue:null,decrement:{type:Function,default:e=>e-1},increment:{type:Function,default:e=>e+1},label:null},emits:["update:modelValue"],setup(e){function t({target:n}){var l;(l=n.querySelector("input"))==null||l.focus()}return(n,l)=>(v(),V(J,null,{default:f(()=>[i(U,{onClick:l[0]||(l[0]=o=>n.$emit("update:modelValue",e.decrement(e.modelValue)))},{default:f(()=>[i(we)]),_:1}),x("p",{class:"label",onClick:t},[F(X(e.label)+" ",1),i(Fe,{"model-value":e.modelValue,"onUpdate:modelValue":l[1]||(l[1]=o=>n.$emit("update:modelValue",o))},null,8,["model-value"])]),i(U,{onClick:l[2]||(l[2]=o=>n.$emit("update:modelValue",e.increment(e.modelValue)))},{default:f(()=>[i(Se)]),_:1})]),_:1}))}});var D=y(je,[["__scopeId","data-v-6b56d56b"]]);function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function Ae(e,t,n){return t&&N(e.prototype,t),n&&N(e,n),e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,l)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(l){Le(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}var T={addCSS:!0,thumbWidth:15,watch:!0};function Re(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}function Ue(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}var $=function(e){return e!=null?e.constructor:null},j=function(e,t){return!!(e&&t&&e instanceof t)},Y=function(e){return e==null},Z=function(e){return $(e)===Object},De=function(e){return $(e)===Number&&!Number.isNaN(e)},q=function(e){return $(e)===String},Ne=function(e){return $(e)===Boolean},Me=function(e){return $(e)===Function},ee=function(e){return Array.isArray(e)},te=function(e){return j(e,NodeList)},Be=function(e){return j(e,Element)},Te=function(e){return j(e,Event)},He=function(e){return Y(e)||(q(e)||ee(e)||te(e))&&!e.length||Z(e)&&!Object.keys(e).length},s={nullOrUndefined:Y,object:Z,number:De,string:q,boolean:Ne,function:Me,array:ee,nodeList:te,element:Be,event:Te,empty:He};function Ke(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function Qe(e,t){if(1>t){var n=Ke(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}var Ge=function(){function e(t,n){Pe(this,e),s.element(t)?this.element=t:s.string(t)&&(this.element=document.querySelector(t)),s.element(this.element)&&s.empty(this.element.rangeTouch)&&(this.config=B({},T,{},n),this.init())}return Ae(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(t){var n=this,l=t?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(o){n.element[l](o,function(u){return n.set(u)},!1)})}},{key:"get",value:function(t){if(!e.enabled||!s.event(t))return null;var n,l=t.target,o=t.changedTouches[0],u=parseFloat(l.getAttribute("min"))||0,a=parseFloat(l.getAttribute("max"))||100,c=parseFloat(l.getAttribute("step"))||1,d=l.getBoundingClientRect(),h=100/d.width*(this.config.thumbWidth/2)/100;return 0>(n=100/d.width*(o.clientX-d.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*h:50<n&&(n+=2*(n-50)*h),u+Qe(n/100*(a-u),c)}},{key:"set",value:function(t){e.enabled&&s.event(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),Ue(t.target,t.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},l=null;if(s.empty(t)||s.string(t)?l=Array.from(document.querySelectorAll(s.string(t)?t:'input[type="range"]')):s.element(t)?l=[t]:s.nodeList(t)?l=Array.from(t):s.array(t)&&(l=t.filter(s.element)),s.empty(l))return null;var o=B({},T,{},n);if(s.string(t)&&o.watch){var u=new MutationObserver(function(a){Array.from(a).forEach(function(c){Array.from(c.addedNodes).forEach(function(d){s.element(d)&&Re(d,t)&&new e(d,o)})})});u.observe(document.body,{childList:!0,subtree:!0})}return l.map(function(a){return new e(a,n)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}();const We=["autocomplete","max","min","step","value"],Xe=_({__name:"InlineRangeField",props:{modelValue:null,autocomplete:null,min:null,max:null,step:null},emits:["update:modelValue"],setup(e){let t;ue(()=>t==null?void 0:t());const n=b();return ae(()=>{const l=re(n);if(!l)return;const o=new Ge(l);t=()=>o.destroy}),(l,o)=>{var u;return v(),w("input",{ref_key:"field",ref:n,class:"field",autocomplete:(u=e.autocomplete)!=null?u:"off",max:e.max,min:e.min,step:e.step,value:e.modelValue,type:"range",onInput:o[0]||(o[0]=a=>l.$emit("update:modelValue",+a.target.value))},null,40,We)}}});var H=y(Xe,[["__scopeId","data-v-0d39b266"]]);const Je={class:"label"},Ye={class:"nowrap"},Ze=_({__name:"Labeled",props:{label:null},setup(e){return(t,n)=>(v(),w("label",Je,[i(J,null,{default:f(()=>[x("span",Ye,X(e.label),1),E(t.$slots,"default",{},void 0,!0)]),_:3})]))}});var S=y(Ze,[["__scopeId","data-v-c154c8f4"]]);let qe={"+":2,"-":2,"*":3,"/":3,"**":4,"^":5};function K(e){return e=="("?0:qe[e]||1}let et={"+":"l","-":"l","*":"l","/":"l"};function tt(e){return et[e]||"r"}let nt=["+","-","*","/","^","("];function Q(e){return!nt.includes(e)}function lt(e){let t=[],n=!1;for(;;){let a;if(e.length===0)break;(a=e.match(/^\d+(?:\.\d+)?/))?(n&&t.push("**"),n=!0,t.push(+a[0]),e=e.slice(a[0].length)):(a=e.match(/^(sin|cos|tan|exp|log|abs|min|max|rawsqr)/))?(n&&t.push("**"),n=!1,t.push(a[0]),e=e.slice(a[0].length)):(a=e.match(/^(pi|pz|ppz|sz|e|i|c|z)/))?(n&&t.push("**"),n=!0,t.push(a[0]),e=e.slice(a[0].length)):((a=e.match(/^[-+*\/^()]/))&&(n&&a[0]=="("&&t.push("**"),n=!1,a[0]==")"&&(n=!0),t.push(a[0])),e=e.slice(1))}let l=[],o=[],u;for(;u=t.shift();)if(typeof u=="number"||u.match(/^(pi|pz|ppz|sz|e|i|c|z)$/))l.push(u);else if(u==")"){for(;o[o.length-1]!="(";){let c=o[o.length-1];if(!c)return["z"];o.pop(),l.push(c)}if(o.pop()!="(")return["z"];let a=o[o.length-1];if(!a)continue;Q(a)&&(o.pop(),l.push(a))}else if(u=="("||Q(u))o.push(u);else{let a=u,c;for(;(c=o[o.length-1])&&c!="(";){let d=K(a),h=K(c);if(!(h>d||d==h&&tt(a)=="l"))break;l.push((o.pop(),c))}o.push(a)}for(;u=o.pop();){if(u=="("||u==")")return["z"];l.push(u)}return l}function ot(e){try{let t=[];for(let n of e)if(typeof n=="number")t.push(`vec2(${n}, 0)`);else if(n=="i")t.push("vec2(0, 1)");else if(n=="pi")t.push("vec2(3.141592653589793, 0)");else if(n=="e")t.push("vec2(2.718281828459045, 0)");else if(n.match(/^(pz|ppz|sz|c|z)$/))t.push(n);else if(n=="+"||n=="-"){let l=t.pop(),o=t.pop();t.push(`${o} ${n} ${l}`)}else if(n=="*"||n=="**"||n=="/"||n=="^"||n=="min"||n=="max"){n=="/"?n="div":n=="^"?n="power":(n=="*"||n=="**")&&(n="mult");let l=t.pop(),o=t.pop();t.push(`${n}(${o}, ${l})`)}else(n=="sin"||n=="cos"||n=="tan"||n=="exp"||n=="log"||n=="abs"||n=="rawsqr")&&t.push(`${n}(${t.pop()})`);return t.length!=1?"z":t[0]}catch{return"z"}}function at(e){return ot(lt(e))}const rt=F("Apply Equation"),ut=x("option",{value:"rainbow"},"Rainbow",-1),it=F(" Reset Position "),mt=_({__name:"FractalExplorer",setup(e){const t=L(100,5,1/0);g("detail",t);function n(r){return r<=10?5:r<=25?5*Math.ceil((r-5)/5):r<=50?25:50*Math.ceil((r-50)/50)}function l(r){return r<10?10:r<25?5*~~((r+5)/5):r<50?50:50*~~((r+50)/50)}const o=L(2,.1,1/0);g("limit",o);function u(r){return r<=2?Math.ceil(10*(r-.1))/10:Math.ceil(r-1)}function a(r){return r<2?~~(10*(r+.1))/10:~~(r+1)}const c=b("rainbow");g("theme",c);const d=b(0);g("colorOffset",d);const h=b(1);g("colorRepetition",h);const k=b("z^2+c");g("equation",k);const ne="in vec2 pos;out vec4 color;uniform int detail;uniform float limit;uniform float colorOffset;uniform float colorRepetition;float pi=3.1415926535;vec3 hsl2rgb(vec3 c){vec3 rgb=clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0,0.0,1.0);return c.z+c.y*(rgb-0.5)*(1.0-abs(2.0*c.z-1.0));}vec3 palette(float t){float hue=mod(2.0*colorRepetition*t+colorOffset,1.0);vec3 hsl=vec3(1.0-hue,1,0.5);return hsl2rgb(hsl);}vec3 newtonPalette(float t){float hue=mod(t*colorRepetition/pi+colorOffset,1.0);return hsl2rgb(vec3(1.0-hue,1.0,0.5));}vec2 cube(vec2 a){float x2=a.x*a.x;float y2=a.y*a.y;float d=x2-y2;return vec2(a.x*(d-y2-y2),a.y*(x2+x2+d));}vec2 sqr(vec2 a){return vec2(a.x*a.x-a.y*a.y,2.0*a.x*a.y);}vec2 rawsqr(vec2 a){return a*a;}vec2 mult(vec2 a,vec2 b){float x=a.x*b.x-a.y*b.y;float y=a.x*b.y+a.y*b.x;return vec2(x,y);}vec2 div(vec2 a,vec2 b){float denom=1.0/(b.x*b.x+b.y*b.y);return vec2(a.x*b.x+a.y*b.y,a.y*b.x-a.x*b.y)*denom;}vec2 power(vec2 a,vec2 b){int count=int(b.x);if(count<=1)return a;vec2 result=a;for(int i=1;i<count;i++){result=mult(result,a);}return result;}void main(){vec2 z,pz,ppz,nz,c=pos;vec3 sz;color=vec4(0,0,0,1);for(int i=0;i<detail;i++){ppz=pz;pz=z;z={{EQ}};if(length(z)>limit){color=vec4(palette(float(i)*0.01),1);return;}}}",P=b();let z,C=b();function A(){z==null||z(),de(P,ne.replace("{{EQ}}",at(k.value))).then(r=>{r.useUniform("detail","i",t),r.useUniform("limit","f",o),r.useUniform("colorOffset","f",d),r.useUniform("colorRepetition","f",h),z=r.destroy,C.value=()=>{r.bounds.xStart.value=-2,r.bounds.xEnd.value=2,r.bounds.yStart.value=-2,r.bounds.yEnd.value=2}})}return A(),(r,p)=>(v(),V(ce,null,{options:f(()=>[i(D,{modelValue:O(t),"onUpdate:modelValue":p[0]||(p[0]=m=>R(t)?t.value=m:null),decrement:n,increment:l,label:"Detail Level:"},null,8,["modelValue"]),i(D,{modelValue:O(o),"onUpdate:modelValue":p[1]||(p[1]=m=>R(o)?o.value=m:null),decrement:u,increment:a,label:"Fractal Size:"},null,8,["modelValue"]),i(S,{label:"Equation:"},{default:f(()=>[i(se,{modelValue:k.value,"onUpdate:modelValue":p[2]||(p[2]=m=>k.value=m)},null,8,["modelValue"]),i(I,{style:{"white-space":"pre"},onClick:A},{default:f(()=>[rt]),_:1})]),_:1}),i(S,{label:"Theme:"},{default:f(()=>[i(me,{modelValue:c.value,"onUpdate:modelValue":p[3]||(p[3]=m=>c.value=m)},{default:f(()=>[ut]),_:1},8,["modelValue"])]),_:1}),i(S,{label:"Color Offset:"},{default:f(()=>[i(H,{modelValue:d.value,"onUpdate:modelValue":p[4]||(p[4]=m=>d.value=m),max:1,min:0,step:"any"},null,8,["modelValue"])]),_:1}),i(S,{label:"Color Repetition:"},{default:f(()=>[i(H,{modelValue:h.value,"onUpdate:modelValue":p[5]||(p[5]=m=>h.value=m),max:10,min:-10,step:"any"},null,8,["modelValue"])]),_:1})]),buttons:f(()=>[O(C)?(v(),V(I,{key:0,onClick:O(C)},{default:f(()=>[it]),_:1},8,["onClick"])):ie("",!0)]),default:f(()=>[x("canvas",{ref_key:"canvas",ref:P},null,512)]),_:1}))}});export{mt as default};
