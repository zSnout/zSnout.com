import{f as H,a as L}from"./main.200onzgm.js";import{F as V}from"./FullscreenDisplay.od9apf4f.js";import{H as E}from"./BookmarkIcon.46krkaf8.js";import{V as Y}from"./VStack.3evi6szx.js";import{u as S}from"./useCanvas.3phirwm2.js";import{l as $,r as k,x as G,C as N,D as x,a9 as _,F as M,ad as W,ae as X}from"./runtime-core.esm-bundler.47vl3tei.js";import{a as U}from"./_plugin-vue_export-helper.4yxwi37t.js";import"./LogoLight.3fmf1259.js";import"./SharedNav.4z4l3m5g.js";import"./Field.5c7fkv56.js";function T(t,c){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);c&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function C(t){for(var c=1;c<arguments.length;c++){var a=arguments[c]!=null?arguments[c]:{};c%2?T(Object(a),!0).forEach(function(s){q(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function q(t,c,a){return c in t?Object.defineProperty(t,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[c]=a,t}function I(t){return t.slice(0,-1)}function K(t,c=0){return c?Array.from(Array(c-t).keys()).map(a=>a+t):Array.from(Array(t).keys())}function B(t){return[...new Set(t)]}function A(t,c){const a=B(t.map(d=>d.set)).filter(Boolean),s=(n=K(1,t.length+1),m=a,[n,m].reduce((d,b)=>d.filter(w=>!b.includes(w)))).sort(()=>.5-c());var n,m;t.filter(d=>!d.set).forEach((d,b)=>d.set=s[b])}function R(t,c,a=.5){I(t).forEach((s,n)=>{const m=t[n+1],d=s.set!==m.set,b=c()<=a;d&&b&&(function(w,u,i){w.forEach(f=>{f.set===u&&(f.set=i)})}(t,m.set,s.set),s.right=!1,m.left=!1)})}function J(t=8,c=t,a=!0,s=1){const n=function(u){return function(){let i=u+=1831565813;return i=Math.imul(i^i>>>15,1|i),i^=i+Math.imul(i^i>>>7,61|i),((i^i>>>14)>>>0)/4294967296}}(s),m=[],d=K(t);for(let u=0;u<c;u+=1){const i=d.map(f=>({x:f,y:u,top:a||u>0,left:a||f>0,bottom:a||u<c-1,right:a||f<t-1}));m.push(i)}I(m).forEach((u,i)=>{A(u,n),R(u,n),function(f,j,D){const P=Object.values(function(r,o){let l=B(r.map(e=>e.set)).reduce((e,p)=>C(C({},e),{},{[p]:[]}),{});return r.forEach(e=>l[e.set].push(e)),l}(f)),{ceil:z}=Math;P.forEach(r=>{(function(o,l,e){l=l??1;const p=o==null?0:o.length;if(!p||l<1)return[];l=l>p?p:l;let y=-1;const v=p-1,h=[...o];for(;++y<l;){const g=y+Math.floor(e()*(v-y+1)),F=h[g];h[g]=h[y],h[y]=F}return h.slice(0,l)})(r,z(D()*r.length),D).forEach(o=>{if(o){const l=j[o.x];o.bottom=!1,l.top=!1,l.set=o.set}})})}(u,m[i+1],n)});const b=(w=m)[w.length-1];var w;return A(b,n),R(b,n,1),m}const O=t=>(W("data-v-7acfbfc3"),t=t(),X(),t),Q=O(()=>_("div",null,null,-1)),Z=O(()=>_("div",null,null,-1)),ee=O(()=>_("div",null,null,-1)),te=O(()=>_("div",null,null,-1)),oe=O(()=>_("div",null,null,-1)),ne=$({__name:"maze-game",setup(t){const c=k(),a=k(),s=k(),n=32,m=12,d=n/2;let b=0,w=0;const u=k(0),i=k(0);function f(r,o,l=!1){var p;if(!s.value||r&&o)return;const e=(p=s.value)==null?void 0:p[i.value][u.value];l?(u.value+=r,i.value+=o):(u.value+=r===-1&&!e.left?-1:r===1&&!e.right?1:0,i.value+=o===-1&&!e.top?-1:o===1&&!e.bottom?1:0),u.value=Math.max(0,Math.min(b,u.value)),i.value=Math.max(0,Math.min(w,i.value))}S(c,{useDevicePixelRatio:!1}).then(r=>{const{canvas:o,onResize:l}=r,e=o.getContext("2d");if(!e)throw new Error("Your device does not support HTML5 canvases.");function p(){if(!s.value&&o.width>4*n&&o.height>4*n){const y=~~(o.width/n)-2,v=~~(o.height/n)-2;s.value=J(y,v,!0,~~(Math.random()*1e6)),b=y,w=v}}p(),s.value||l(p),H(()=>{e.clearRect(0,0,o.width,o.height),e.beginPath();const y=u.value*n+n+d,v=i.value*n+n+d;e.fillStyle="black",e.moveTo(y,v),e.arc(y,v,m,0,2*Math.PI),e.fill()})}),S(a,{useDevicePixelRatio:!1}).then(r=>{const{canvas:o,onResize:l}=r,e=o.getContext("2d");if(!e)throw new Error("Your device does not support HTML5 canvases.");function p(){if(e.fillStyle="white",e.fillRect(0,0,o.width,o.height),!!s.value)for(const y of s.value)for(const v of y){e.lineWidth=2,e.strokeStyle="black",e.lineCap="round";const h=v.x*n+n,g=v.y*n+n;v.top&&(e.moveTo(h,g),e.lineTo(h+n,g),e.stroke()),v.left&&(e.moveTo(h,g),e.lineTo(h,g+n),e.stroke()),v.right&&(e.moveTo(h+n,g),e.lineTo(h+n,g+n),e.stroke()),v.bottom&&(e.moveTo(h,g+n),e.lineTo(h+n,g+n),e.stroke())}}p(),l(()=>setTimeout(p,100))});const j="ArrowUp W w".split(" "),D="ArrowLeft A a".split(" "),P="ArrowDown S s".split(" "),z="ArrowRight D d".split(" ");return L("keydown",r=>{!r.ctrlKey&&!r.metaKey&&(D.includes(r.key)?(r.preventDefault(),f(-1,0,r.altKey)):z.includes(r.key)?(r.preventDefault(),f(1,0,r.altKey)):j.includes(r.key)?(r.preventDefault(),f(0,-1,r.altKey)):P.includes(r.key)&&(r.preventDefault(),f(0,1,r.altKey)))}),(r,o)=>(G(),N(V,null,{default:x(()=>[_("canvas",{ref_key:"mazeImage",ref:a,class:"maze-image"},null,512),_("canvas",{ref_key:"canvas",ref:c,class:"main"},null,512),M(Y,{class:"controls dark",space:1/16,stretch:""},{default:x(()=>[M(E,{space:1/16,stretch:""},{default:x(()=>[Q,_("div",{class:"btn second-layer w",onClick:o[0]||(o[0]=l=>f(0,-1))},"^"),Z]),_:1}),M(E,{space:1/16,stretch:""},{default:x(()=>[_("div",{class:"btn second-layer a",onClick:o[1]||(o[1]=l=>f(-1,0))},"<"),ee,_("div",{class:"btn second-layer d",onClick:o[2]||(o[2]=l=>f(1,0))},">")]),_:1}),M(E,{space:1/16,stretch:""},{default:x(()=>[te,_("div",{class:"btn second-layer s",onClick:o[3]||(o[3]=l=>f(0,1))},"v"),oe]),_:1})]),_:1})]),_:1}))}});const de=U(ne,[["__scopeId","data-v-7acfbfc3"]]);export{de as default};
