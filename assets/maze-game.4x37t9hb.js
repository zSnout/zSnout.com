import{d as V,r as x,g as Y,l as $,c as F,w as M,o as G,a as _,e as P,p as N,h as W,_ as X}from"./index.xh0zaea0.js";import{F as U}from"./FullscreenDisplay.75rpamat.js";import{H as E}from"./BookmarkIcon.1ijfs95x.js";import{V as q}from"./VStack.3evi6szx.js";import{u as T}from"./useCanvas.3phirwm2.js";import"./LogoLight.3fmf1259.js";import"./SharedNav.4z4l3m5g.js";import"./Field.5c7fkv56.js";function C(t,a){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),n.push.apply(n,r)}return n}function A(t){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?C(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J(t,a,n){return a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t}function K(t){return t.slice(0,-1)}function B(t,a=0){return a?Array.from(Array(a-t).keys()).map(n=>n+t):Array.from(Array(t).keys())}function H(t){return[...new Set(t)]}function R(t,a){const n=H(t.map(y=>y.set)).filter(Boolean),r=(d=B(1,t.length+1),m=n,[d,m].reduce((y,h)=>y.filter(g=>!h.includes(g)))).sort(()=>.5-a());var d,m;t.filter(y=>!y.set).forEach((y,h)=>y.set=r[h])}function I(t,a,n=.5){K(t).forEach((r,d)=>{const m=t[d+1],y=r.set!==m.set,h=a()<=n;y&&h&&(function(g,c,u){g.forEach(w=>{w.set===c&&(w.set=u)})}(t,m.set,r.set),r.right=!1,m.left=!1)})}function Q(t=8,a=t,n=!0,r=1){const d=function(c){return function(){let u=c+=1831565813;return u=Math.imul(u^u>>>15,1|u),u^=u+Math.imul(u^u>>>7,61|u),((u^u>>>14)>>>0)/4294967296}}(r),m=[],y=B(t);for(let c=0;c<a;c+=1){const u=y.map(w=>({x:w,y:c,top:n||c>0,left:n||w>0,bottom:n||c<a-1,right:n||w<t-1}));m.push(u)}K(m).forEach((c,u)=>{R(c,d),I(c,d),function(w,z,D){const s=Object.values(function(v,e){let l=H(v.map(p=>p.set)).reduce((p,f)=>A(A({},p),{},{[f]:[]}),{});return v.forEach(p=>l[p.set].push(p)),l}(w)),{ceil:o}=Math;s.forEach(v=>{(function(e,l,p){l=l??1;const f=e==null?0:e.length;if(!f||l<1)return[];l=l>f?f:l;let b=-1;const k=f-1,O=[...e];for(;++b<l;){const S=b+Math.floor(p()*(k-b+1)),L=O[S];O[S]=O[b],O[b]=L}return O.slice(0,l)})(v,o(D()*v.length),D).forEach(e=>{if(e){const l=z[e.x];e.bottom=!1,l.top=!1,l.set=e.set}})})}(c,m[u+1],d)});const h=(g=m)[g.length-1];var g;return R(h,d),I(h,d,1),m}const j=t=>(N("data-v-7acfbfc3"),t=t(),W(),t),Z=j(()=>_("div",null,null,-1)),ee=j(()=>_("div",null,null,-1)),te=j(()=>_("div",null,null,-1)),oe=j(()=>_("div",null,null,-1)),ne=j(()=>_("div",null,null,-1)),i=32,se=12,re=V({__name:"maze-game",setup(t){const a=x(),n=x(),r=x(),d=i/2;let m=0,y=0;const h=x(0),g=x(0);function c(s,o,v=!1){var l;if(!r.value||s&&o)return;const e=(l=r.value)==null?void 0:l[g.value][h.value];v?(h.value+=s,g.value+=o):(h.value+=s===-1&&!e.left?-1:s===1&&!e.right?1:0,g.value+=o===-1&&!e.top?-1:o===1&&!e.bottom?1:0),h.value=Math.max(0,Math.min(m,h.value)),g.value=Math.max(0,Math.min(y,g.value))}T(a,{useDevicePixelRatio:!1}).then(s=>{const{canvas:o,onResize:v}=s,e=o.getContext("2d");if(!e)throw new Error("Your device does not support HTML5 canvases.");function l(){if(!r.value&&o.width>4*i&&o.height>4*i){const p=~~(o.width/i)-2,f=~~(o.height/i)-2;r.value=Q(p,f,!0,~~(Math.random()*1e6)),m=p,y=f}}l(),r.value||v(l),Y(()=>{e.clearRect(0,0,o.width,o.height),e.beginPath();const p=h.value*i+i+d,f=g.value*i+i+d;e.fillStyle="black",e.moveTo(p,f),e.arc(p,f,se,0,2*Math.PI),e.fill()})}),T(n,{useDevicePixelRatio:!1}).then(s=>{const{canvas:o,onResize:v}=s,e=o.getContext("2d");if(!e)throw new Error("Your device does not support HTML5 canvases.");function l(){if(e.fillStyle="white",e.fillRect(0,0,o.width,o.height),!!r.value)for(const p of r.value)for(const f of p){e.lineWidth=2,e.strokeStyle="black",e.lineCap="round";const b=f.x*i+i,k=f.y*i+i;f.top&&(e.moveTo(b,k),e.lineTo(b+i,k),e.stroke()),f.left&&(e.moveTo(b,k),e.lineTo(b,k+i),e.stroke()),f.right&&(e.moveTo(b+i,k),e.lineTo(b+i,k+i),e.stroke()),f.bottom&&(e.moveTo(b,k+i),e.lineTo(b+i,k+i),e.stroke())}}l(),v(()=>setTimeout(l,100))});const u="ArrowUp W w".split(" "),w="ArrowLeft A a".split(" "),z="ArrowDown S s".split(" "),D="ArrowRight D d".split(" ");return $("keydown",s=>{!s.ctrlKey&&!s.metaKey&&(w.includes(s.key)?(s.preventDefault(),c(-1,0,s.altKey)):D.includes(s.key)?(s.preventDefault(),c(1,0,s.altKey)):u.includes(s.key)?(s.preventDefault(),c(0,-1,s.altKey)):z.includes(s.key)&&(s.preventDefault(),c(0,1,s.altKey)))}),(s,o)=>(G(),F(U,null,{default:M(()=>[_("canvas",{ref_key:"mazeImage",ref:n,class:"maze-image"},null,512),_("canvas",{ref_key:"canvas",ref:a,class:"main"},null,512),P(q,{class:"controls dark",space:1/16,stretch:""},{default:M(()=>[P(E,{space:1/16,stretch:""},{default:M(()=>[Z,_("div",{class:"btn second-layer w",onClick:o[0]||(o[0]=v=>c(0,-1))},"^"),ee]),_:1}),P(E,{space:1/16,stretch:""},{default:M(()=>[_("div",{class:"btn second-layer a",onClick:o[1]||(o[1]=v=>c(-1,0))},"<"),te,_("div",{class:"btn second-layer d",onClick:o[2]||(o[2]=v=>c(1,0))},">")]),_:1}),P(E,{space:1/16,stretch:""},{default:M(()=>[oe,_("div",{class:"btn second-layer s",onClick:o[3]||(o[3]=v=>c(0,1))},"v"),ne]),_:1})]),_:1})]),_:1}))}});const me=X(re,[["__scopeId","data-v-7acfbfc3"]]);export{me as default};
