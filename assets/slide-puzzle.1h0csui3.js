import{h as D,f as I}from"./main.200onzgm.js";import{D as B}from"./DocumentDisplay.6d0yf2eg.js";import{B as y,V as E}from"./VStack.3evi6szx.js";import{H as V,S as v}from"./BookmarkIcon.46krkaf8.js";import{l as F,r as k,o as N,x as Y,C as q,D as _,F as f,a9 as A,H as z}from"./runtime-core.esm-bundler.47vl3tei.js";import{a as L}from"./_plugin-vue_export-helper.4yxwi37t.js";import"./Navigation.vue_vue_type_script_setup_true_lang.4wr1p5fg.js";import"./Logo.vue_vue_type_script_setup_true_lang.2nyidlx8.js";import"./LogoLight.3fmf1259.js";import"./SharedNav.4z4l3m5g.js";import"./Field.5c7fkv56.js";const W="/assets/new-york.3ksqj6t7.webp",X=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"})),G="/assets/ocean.1hca0f36.webp",J=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"})),K="/assets/rick-astley.6c7ubrs9.webp",Q=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"})),U="/assets/san-francisco.3yuux565.webp",Z=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"})),$=F({__name:"slide-puzzle",setup(ee){const S=k(""),m=document.createElement("img"),h=k(),a=[];let o=0,t=0;N(()=>{const e=Object.assign({"../pictures/slide-puzzle/new-york.webp":X,"../pictures/slide-puzzle/ocean.webp":J,"../pictures/slide-puzzle/rick-astley.webp":Q,"../pictures/slide-puzzle/san-francisco.webp":Z}),s=Object.keys(e),i=s[Math.floor(s.length*Math.random())];m.src=S.value=e[i].default,m.onload=w});let r=4,c=4,b=0;function M(e){return new Promise(s=>setTimeout(s,e))}async function w(){const e=++b,s=h.value;if(!s)return;const i=s.getContext("2d");if(!i)throw new Error("Your device doesn't support HTML5 canvases.");s.width=m.naturalWidth,s.height=m.naturalHeight;const l=s.height/r,n=s.width/c;i.drawImage(m,0,0),a.splice(0,a.length);for(let u=0;u<r;u++){const g=[],d=l*u;for(let p=0;p<c;p++)g.push({data:i.getImageData(n*p,d,n,l)});a.push(g)}if(o=Math.floor(r*Math.random()),t=Math.floor(c*Math.random()),a[o][t].data=void 0,await M(5e3),b===e)for(let u=0;u<60*r*c;u++)j()}function x(){const e=h.value;if(!e)return;const s=e.getContext("2d");if(!s||!a.length)return;s.clearRect(0,0,e.width,e.height);const i=e.height/r,l=e.width/c;for(let n=0;n<r;n++){const u=a[n],g=i*n;for(let d=0;d<c;d++){const{data:p}=u[d];p&&s.putImageData(p,l*d,g)}}}const P=[[()=>t!==0,()=>{const e=a[o];[e[t],e[t-1]]=[e[t-1],e[t]],t--}],[()=>o!==0,()=>{[a[o][t],a[o-1][t]]=[a[o-1][t],a[o][t]],o--}],[()=>t!==c-1,()=>{const e=a[o];[e[t],e[t+1]]=[e[t+1],e[t]],t++}],[()=>o!==r-1,()=>{[a[o][t],a[o+1][t]]=[a[o+1][t],a[o][t]],o++}]];function j(){const e=P.filter(([s])=>s()).map(([,s])=>s);e[Math.floor(e.length*Math.random())]()}function C(){r--,c--,r<2&&(r=2),c<2&&(c=2),w()}function O(){r++,c++,w()}const{width:R,height:H}=D(h);function T(e){const s=e.offsetX/R.value,i=e.offsetY/H.value,l=Math.floor(i*r),n=Math.floor(s*c);(l==o&&(n==t-1||n==t+1)||n==t&&(l==o-1||l==o+1))&&([a[l][n],a[o][t]]=[a[o][t],a[l][n]],o=l,t=n)}return I(x),(e,s)=>(Y(),q(B,{center:""},{default:_(()=>[f(E,{class:"outer"},{default:_(()=>[A("canvas",{ref_key:"canvasRef",ref:h,class:"puzzle second-layer",style:{padding:"0"},onPointerdown:T},null,544),f(V,null,{default:_(()=>[f(y,{onClick:C},{default:_(()=>[z("Easier")]),_:1}),f(v),f(y,{onClick:w},{default:_(()=>[z("Reset")]),_:1}),f(v),f(y,{onClick:O},{default:_(()=>[z("Harder")]),_:1})]),_:1})]),_:1})]),_:1}))}});const de=L($,[["__scopeId","data-v-a486489e"]]);export{de as default};
