import{B as w}from"./VStack.3evi6szx.js";import{C as U}from"./CardGrid.1kdxvvm0.js";import{D as Y}from"./DocumentDisplay.6d0yf2eg.js";import{F as b}from"./Field.5c7fkv56.js";import{M as x}from"./BookmarkIcon.46krkaf8.js";import{T as h}from"./Title.4eiq6n5a.js";import{c as s,A as B,s as g,p as N,d as E,e as C}from"./main.200onzgm.js";import{I as P}from"./InlineButton.12vhnjwt.js";import{l as M,r,x as d,y as p,F as t,D as a,aa as z,G as $,H as l,I as k,u as n,a8 as I,C as A,E as F}from"./runtime-core.esm-bundler.55v0mz3f.js";import"./_plugin-vue_export-helper.4yxwi37t.js";import"./Navigation.vue_vue_type_script_setup_true_lang.4wr1p5fg.js";import"./Logo.vue_vue_type_script_setup_true_lang.2nyidlx8.js";import"./LogoLight.3fmf1259.js";import"./SharedNav.4z4l3m5g.js";const G={key:0},_={key:1},H=I("p",null,null,-1),K={key:2},se=M({__name:"my-account",setup(j){const V=r(!1),O=r(""),v=r(!1),m=r(!1),D=r(""),f=r(""),c=r(""),y=r(""),i=r("username");s.on("account:done:reset-session",()=>{O.value="Your other devices have been logged out.",setTimeout(()=>{V.value=!1},1e3)});function L(){V.value=!0,O.value="Logging out your other devices...",s.emit("account:reset-session",g.value,!0)}function S(u){v.value=!0,m.value=!0,D.value=`Pick a new ${i.value=u} below.`,u==="username"?f.value=B.value:f.value="",c.value="",y.value=""}function T(){const u=i.value;u==="password"?s.emit("account:update:password",g.value,f.value,c.value):u==="username"&&s.emit("account:update:username",g.value,f.value),m.value=!1;function e(){s.off(`account:done:update:${u}`,o),m.value=!0}function o(){s.off("error",e),D.value=`Your ${u} has been changed.`,setTimeout(()=>v.value=!1,1e3)}s.once("error",e),s.once(`account:done:update:${u}`,o)}return(u,e)=>(d(),p($,null,[t(Y,null,{default:a(()=>[t(h,null,{default:a(()=>[l(k(n(B))+"'s Account",1)]),_:1}),t(U,null,{default:a(()=>[t(w,{onClick:e[0]||(e[0]=o=>(B.value="",g.value="",u.$router.push("/")))},{default:a(()=>[l(" Log Out ")]),_:1}),t(w,{onClick:L},{default:a(()=>[l("Log Out Other Devices")]),_:1}),t(w,{onClick:e[1]||(e[1]=o=>S("username"))},{default:a(()=>[l("Change Username")]),_:1}),t(w,{onClick:e[2]||(e[2]=o=>S("password"))},{default:a(()=>[l("Change Password")]),_:1})]),_:1}),n(g)?(d(),p("p",G,[l(" You "+k(n(N)?"are currently receiving":"will not receive")+" notifications for updates to the zSnout blog. ",1),n(E)?(d(),p($,{key:0},[l(" Click "),t(P,{onClick:e[3]||(e[3]=o=>n(s).emit("blog:update:will-notify",n(g),!n(N)))},{default:a(()=>[l(" here ")]),_:1}),l(" to opt-"+k(n(N)?"out of":"in to")+" notifications. ",1)],64)):(d(),p($,{key:1},[l(" You cannot change notification settings when offline. ")],64))])):(d(),p("p",_,[t(P,{onClick:e[4]||(e[4]=o=>v.value=!0)},{default:a(()=>[l("Log in")]),_:1}),l(" to a zSnout account or "),t(P,{onClick:e[5]||(e[5]=o=>v.value=!0)},{default:a(()=>[l("sign up")]),_:1}),l(" to receive notification for new blog posts. ")]))]),_:1}),t(x,{open:V.value},{buttons:a(()=>[H]),default:a(()=>[I("p",null,k(O.value),1)]),_:1},8,["open"]),t(x,{open:v.value},z({default:a(()=>[I("p",null,k(D.value),1),m.value?(d(),A(b,{key:0,modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=o=>f.value=o),autocomplete:i.value,placeholder:i.value==="password"?"Old Password":"New Username",type:i.value==="password"?"password":"text",onInput:e[7]||(e[7]=o=>C.value="")},null,8,["modelValue","autocomplete","placeholder","type"])):F("",!0),i.value==="password"&&m.value?(d(),p($,{key:1},[t(b,{modelValue:c.value,"onUpdate:modelValue":e[8]||(e[8]=o=>c.value=o),autocomplete:"new-password",placeholder:"New Password",type:"password",onInput:e[9]||(e[9]=o=>C.value="")},null,8,["modelValue"]),t(b,{modelValue:y.value,"onUpdate:modelValue":e[10]||(e[10]=o=>y.value=o),autocomplete:"new-password",placeholder:"Verify Password",type:"password",onInput:e[11]||(e[11]=o=>C.value="")},null,8,["modelValue"])],64)):F("",!0),i.value==="password"&&c.value!==y.value||n(C)?(d(),p("p",K,k(i.value==="password"&&c.value!==y.value?"Your passwords should match.":n(C)),1)):F("",!0)]),_:2},[m.value?{name:"buttons",fn:a(()=>[t(w,{onClick:T},{default:a(()=>[l("OK")]),_:1}),t(w,{cancel:"",onClick:e[12]||(e[12]=o=>v.value=!1)},{default:a(()=>[l("Cancel")]),_:1})]),key:"0"}:void 0]),1032,["open"])],64))}});export{se as default};
