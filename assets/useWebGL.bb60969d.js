import{_ as F,S as y,H as C,L as T,a as D,O as z,U as I,B as O,M as U}from"./Modal.7099f694.js";import{d as $,m as N,o as S,h as V,e as i,a as c,f as v,R as G,c as M,q as H,s as u,b as W,F as K,g as X,w as g,ao as Y,X as j,ap as q}from"./index.e79623ae.js";const J=X("OK"),Q={class:"content"},Z=$({__name:"FullscreenDisplay",props:{options:{type:Boolean}},setup(r){const o=N(!1);return(a,t)=>(S(),V(K,null,[i(v(I),{class:"nav",top:""},{default:c(()=>[i(y,null,{default:c(()=>[i(C,{class:"padding"},{default:c(()=>[i(v(G),{to:"/"},{default:c(()=>[i(T,{class:"logo",invert:""})]),_:1}),i(D),a.$slots.options?(S(),M(z,{key:0,class:"options fullscreen",role:"button",onClick:t[0]||(t[0]=n=>o.value=!o.value)})):H("",!0)]),_:1})]),_:1})]),_:1}),i(U,{open:o.value},{buttons:c(()=>[i(O,{cancel:"",onClick:t[1]||(t[1]=n=>o.value=!o.value)},{default:c(()=>[J]),_:1}),u(a.$slots,"buttons",{},void 0,!0)]),default:c(()=>[u(a.$slots,"options",{},void 0,!0)]),_:3},8,["open"]),W("div",Q,[u(a.$slots,"default",{},void 0,!0)])],64))}});var ne=F(Z,[["__scopeId","data-v-3118e2e0"]]);function ee(r){const o=[];return q(()=>o.forEach(a=>a())),new Promise(a=>{o.push(g(()=>{const t=Y(r);if(t instanceof HTMLCanvasElement){const{width:n,height:d}=j(t),s=[];o.push(g(()=>{t.width=n.value*devicePixelRatio,t.height=d.value*devicePixelRatio,s.forEach(e=>e())})),a({canvas:t,onDispose:e=>o.push(e),onResize:e=>s.push(e),size:{width:n,height:d},dispose(){o.forEach(e=>e()),o.splice(0,o.length)}})}}))})}function A(r,o,a){const t=r.createShader(r[`${o}_SHADER`]);if(!t)throw new Error("An error occurred while initializing a shader.");if(r.shaderSource(t,`#version 300 es
precision highp float;
`+a.trim()),r.compileShader(t),r.getShaderParameter(t,r.COMPILE_STATUS))return t;throw console.log(r.getShaderInfoLog(t)),r.deleteShader(t),new Error("An error occurred while compiling a shader.")}function te(r,o,a){const t=r.createProgram();if(!t)throw new Error("An error occurred while initializing a WebGL program.");const n=A(r,"VERTEX",o),d=A(r,"FRAGMENT",a);if(r.attachShader(t,n),r.attachShader(t,d),r.linkProgram(t),r.getProgramParameter(t,r.LINK_STATUS))return{program:t,vertex:n,fragment:d};throw console.log(r.getProgramInfoLog(t)),r.deleteProgram(t),new Error("An error occurred while creating a WebGL program.")}const re=`
in vec2 _pos;
out vec2 pos;

void main() {
  gl_Position = vec4(pos = _pos, 0, 1);
}`;async function se(r,o,a){var _;const t=await ee(r),{canvas:n,onResize:d,onDispose:s}=t,e=n.getContext("webgl2",{preserveDrawingBuffer:a==null?void 0:a.preserveDrawingBuffer});if(!e)throw new Error("An error occurred while initializing the context.");const{program:f,vertex:b,fragment:E}=te(e,(_=a==null?void 0:a.vertShader)!=null?_:re,o);e.useProgram(f),s(()=>e.deleteProgram(f)),s(()=>e.deleteShader(b)),s(()=>e.deleteShader(E));const m=e.getAttribLocation(f,"_pos");e.enableVertexAttribArray(m);const w=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,w),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,1,1,0,0,0]),e.STATIC_DRAW),e.vertexAttribPointer(m,2,e.FLOAT,!1,0,0),s(()=>e.deleteBuffer(w));function h(){e.isContextLost()||(e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.viewport(-n.width,-n.height,2*n.width,2*n.height),e.drawArrays(e.TRIANGLES,0,6))}let p=!1;const R=setInterval(()=>{p&&(p=!1,h())});s(()=>clearInterval(R)),d(h);function L(k,B,P){if(e.isContextLost())return;const x=e.getUniformLocation(f,k);!x||s(g(()=>{let l=v(P);typeof l=="number"&&(l=[l]),!(l.length<1||l.length>4)&&(e[`uniform${l.length}${B}v`](x,l),p=!0)}))}return Object.assign(t,{gl:e,program:f,render:h,useUniform:L,destroy(){t.dispose()}})}export{ne as F,se as u};
