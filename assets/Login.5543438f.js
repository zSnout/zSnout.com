import{a as f,B as v,V}from"./Modal.82f47c6d.js";import{D as _}from"./DocumentDisplay.dd03fa4d.js";import{F as d}from"./Field.7d3d6ef8.js";import{L as i}from"./Labeled.ce407530.js";import{u as w}from"./useApi.9f2beb7d.js";import{d as y,k as r,c as g,w as l,o as p,a as k,b as a,f as B,t as b,m as x,e as C,aC as D,aB as I,aD as L}from"./index.4d3896d1.js";const N={style:{"min-width":"min(500px, 100%)"}},S=C("Log In"),U={key:0},A=y({__name:"Login",setup(E){const n=r(""),u=r(""),s=r(""),m=r(!1);async function c(){m.value=!0;const o=await w({api:"account",method:"POST",body:{username:n.value,password:u.value},resultKeys:["session","username"],desc:"log users in"});o instanceof Error?s.value=o.message:(D.value=o.session,I.value=o.username,L.replace("/")),m.value=!1}return(o,e)=>(p(),g(_,{center:""},{default:l(()=>[k("form",N,[a(V,null,{default:l(()=>[a(i,{label:"Username"},{default:l(()=>[a(d,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),autocomplete:"username",maxlength:"32",placeholder:"Username...",onInput:e[1]||(e[1]=t=>s.value="")},null,8,["modelValue"])]),_:1}),a(i,{label:"Password"},{default:l(()=>[a(d,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value=t),autocomplete:"password",placeholder:"Password...",type:"password",onInput:e[3]||(e[3]=t=>s.value="")},null,8,["modelValue"])]),_:1}),a(f,{size:2}),a(v,{onClick:c},{default:l(()=>[S]),_:1}),s.value?(p(),B("p",U,"Error: "+b(s.value),1)):x("",!0)]),_:1})])]),_:1}))}});export{A as default};
