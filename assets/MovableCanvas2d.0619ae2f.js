import{j as a}from"./index.d8290167.js";import{C as y}from"./CoordinateCanvas2d.40fc4ed4.js";class C extends y{constructor(i,d){super(i,d),a(i,"wheel",t=>{this.setBounds(this.getZoomRegion(Math.sqrt(Math.abs(t.deltaY))*-Math.sign(t.deltaY)/10))});let n;a(i,"touchmove",t=>{t.preventDefault();const{touches:[o,s]}=t;if(t.touches.length===2){const{x,y:c}=this.rect,h=Math.abs((s.clientX-o.clientX)**2+(s.clientY-o.clientY)**2);if(!n){n=h;return}const l=(o.clientX-x+s.clientX-x)/2,u=(o.clientY-c+s.clientY-c)/2;h>n?this.setBounds(this.getZoomRegion(1,{x:l,y:u})):this.setBounds(this.getZoomRegion(-1,{x:l,y:u})),n=h}});let e;a("pointermove",t=>{if(t.preventDefault(),r!==1||!e)return;const{x:o,y:s}=this.pxToCoords(t.offsetX,t.offsetY),{xStart:x,xEnd:c,yStart:h,yEnd:l}=this.bounds;this.setBounds({xStart:x-(o-e.x),xEnd:c-(o-e.x),yStart:h-(s-e.y),yEnd:l-(s-e.y)})});let r=0;a(i,"pointerdown",({offsetX:t,offsetY:o,pointerId:s})=>{r++,e=this.pxToCoords(t,o),this.canvas.setPointerCapture(s)}),a("pointerup",()=>{r=Math.max(0,r-1),e=void 0})}getZoomRegion(i=1,d={x:this.mouse.x/this.devicePixelRatio,y:this.canvas.clientHeight-this.mouse.y/this.devicePixelRatio}){const{xStart:n,xEnd:e,yStart:r,yEnd:t}=this.bounds,{x:o,y:s}=this.pxToCoords(d.x,d.y);return{xStart:n+i*(o-n)/10,xEnd:e+i*(o-e)/10,yStart:r+i*(s-r)/10,yEnd:t+i*(s-t)/10}}}export{C as M};
