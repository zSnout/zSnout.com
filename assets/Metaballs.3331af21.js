import{u as h}from"./useWebGL.0689c821.js";import{F as w}from"./FullscreenDisplay.e34bf76c.js";import{d as g,k as F,c as M,w as L,o as k,a as z}from"./index.82db1b27.js";import"./useCanvas.1a5bc585.js";import"./Modal.e641d88e.js";const G=g({__name:"Metaballs",setup(A){const a=Array.from({length:50},()=>{const t=Math.random(),o=Math.random(),i=Math.random()*5+5,n=(Math.random()-.5)*2/200,r=(Math.random()-.5)*2/200;return{x:t,y:o,r:i,dx:n,dy:r}}),f=F();return h(f,"in vec2 pos;out vec4 color;uniform vec2 window_size;uniform vec3 metaballs[50];void main(){vec2 _pos=(pos*2.0-1.0)*window_size/2.0;float dist;for(int i=0;i<50;i++){vec3 mb=metaballs[i];float dx=mb.x-_pos.x;dx=min(dx,1.0-dx);float dy=mb.y-_pos.y;dy=min(dy,1.0-dy);dist+=1.0/(dx*dx+dy*dy);}if(dist>1000.0)color=vec4(1,1,1,1);else color=vec4(0,0,0,1);}").then(t=>{const{gl:o,onDispose:i,program:n,render:r,size:x}=t,{width:l,height:c}=x,y=o.getUniformLocation(n,"metaballs"),m=o.getUniformLocation(n,"window_size");let d;function u(){a.map(e=>{e.x+=e.dx,e.x<0?e.x=1-e.x:e.x>1&&(e.x=e.x-1),e.y+=e.dy,e.y<0?e.y=1-e.y:e.y>1&&(e.y=e.y-1)});const s=new Float32Array(a.length*3);for(let e=0;e<a.length;e++){const{x:v,y:p,r:_}=a[e];s[e*2]=v,s[e*2+1]=p,s[e*2+2]=_}o.uniform3fv(y,s),c.value>l.value?o.uniform2fv(m,[1,c.value/l.value]):o.uniform2fv(m,[l.value/c.value,1]),r(),d=requestAnimationFrame(u)}i(()=>d!==void 0&&cancelAnimationFrame(d)),u()}),(t,o)=>(k(),M(w,null,{default:L(()=>[z("canvas",{ref_key:"canvas",ref:f},null,512)]),_:1}))}});export{G as default};
