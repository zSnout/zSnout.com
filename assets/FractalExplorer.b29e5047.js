import{d as y,o as b,c as _,w as p,n as se,f as R,p as J,g as W,a as h,aq as ie,b as i,e as T,t as ee,as as Q,k as f,ac as q,u as x,an as re,x as G,m as M}from"./index.93e756b2.js";import{B as N,_ as P,H as ue}from"./Modal.539c308e.js";import{D as ce}from"./Dropdown.4312fcbe.js";import{F as pe}from"./Field.97277b5f.js";import{F as de}from"./FullscreenDisplay.38c362e9.js";import{I as D}from"./InlineCheckboxField.b767ad97.js";import{I as B}from"./InlineRangeField.63c05c79.js";import{L as z}from"./Labeled.21161268.js";import{u as K,a as fe}from"./useMovableCanvas.65a4da31.js";import{s as v}from"./useOption.0aebea9a.js";import"./useWebGL.0591d176.js";import"./useCanvas.cf4174aa.js";const j=y({__name:"IconButton",setup(e){return(a,l)=>(b(),_(N,{center:"",style:{width:"2.5em",height:"2.25em"}},{default:p(()=>[se(a.$slots,"default")]),_:3}))}});const me={},ve=e=>(J("data-v-0298e8c4"),e=e(),W(),e),he={class:"icon",viewBox:"0 0 485.064 485.064",xmlns:"http://www.w3.org/2000/svg"},be=ve(()=>h("path",{d:`M458.736,181.097H26.334C11.793,181.097,0,192.884,0,207.425v70.215c0,14.541,11.787,26.328,26.334,26.328h432.402\r
      c14.541,0,26.328-11.787,26.328-26.328v-70.215C485.07,192.884,473.283,181.097,458.736,181.097z`},null,-1)),xe=[be];function ze(e,a){return b(),R("svg",he,xe)}var _e=P(me,[["render",ze],["__scopeId","data-v-0298e8c4"]]);const ye={},ge=e=>(J("data-v-079820ed"),e=e(),W(),e),Ve={class:"icon",viewBox:"0 0 60.364 60.364",xmlns:"http://www.w3.org/2000/svg"},we=ge(()=>h("path",{d:`M54.454,23.18l-18.609-0.002L35.844,5.91C35.845,2.646,33.198,0,29.934,0c-3.263,0-5.909,2.646-5.909,5.91v17.269\r
		L5.91,23.178C2.646,23.179,0,25.825,0,29.088c0.002,3.264,2.646,5.909,5.91,5.909h18.115v19.457c0,3.267,2.646,5.91,5.91,5.91\r
		c3.264,0,5.909-2.646,5.91-5.908V34.997h18.611c3.262,0,5.908-2.645,5.908-5.907C60.367,25.824,57.718,23.178,54.454,23.18z`},null,-1)),ke=[we];function $e(e,a){return b(),R("svg",Ve,ke)}var Ce=P(ye,[["render",$e],["__scopeId","data-v-079820ed"]]);const Ie=["autocomplete","placeholder","type","value"],Se=y({__name:"InlineField",props:{modelValue:null,type:null,autocomplete:null,placeholder:null},emits:["update:modelValue"],setup(e){return(a,l)=>{var t,n;return b(),R("input",{class:"field",autocomplete:(t=e.autocomplete)!=null?t:"off",placeholder:e.placeholder,style:ie({width:e.modelValue.length+2+"ch"}),type:(n=e.type)!=null?n:"text",value:e.modelValue,onInput:l[0]||(l[0]=r=>a.$emit("update:modelValue",r.target.value))},null,44,Ie)}}});var Ue=P(Se,[["__scopeId","data-v-3d0155ac"]]);const Pe=y({__name:"InlineNumericField",props:{modelValue:null,autocomplete:null,placeholder:null},emits:["update:modelValue"],setup(e){return(a,l)=>(b(),_(Ue,{autocomplete:e.autocomplete,"model-value":""+e.modelValue,placeholder:e.placeholder,type:"number","onUpdate:modelValue":l[0]||(l[0]=t=>a.$emit("update:modelValue",+t))},null,8,["autocomplete","model-value","placeholder"]))}});const Ee=y({__name:"Incrementable",props:{modelValue:null,decrement:{type:Function,default:e=>e-1},increment:{type:Function,default:e=>e+1},label:null},emits:["update:modelValue"],setup(e){function a({target:l}){var t;(t=l.querySelector("input"))==null||t.focus()}return(l,t)=>(b(),_(ue,null,{default:p(()=>[i(j,{onClick:t[0]||(t[0]=n=>l.$emit("update:modelValue",e.decrement(e.modelValue)))},{default:p(()=>[i(_e)]),_:1}),h("p",{class:"label",onClick:a},[T(ee(e.label)+" ",1),i(Pe,{"model-value":e.modelValue,"onUpdate:modelValue":t[1]||(t[1]=n=>l.$emit("update:modelValue",n))},null,8,["model-value"])]),i(j,{onClick:t[2]||(t[2]=n=>l.$emit("update:modelValue",e.increment(e.modelValue)))},{default:p(()=>[i(Ce)]),_:1})]),_:1}))}});var X=P(Ee,[["__scopeId","data-v-6b56d56b"]]);const Fe={"+":2,"-":2,"*":3,"#":3,"/":3,"**":4,"^":5};function Y(e){return e==="("?0:Fe[e]||1}const Le={"+":"l","-":"l","*":"l","#":"l","/":"l"};function Oe(e){return Le[e]||"r"}const Me=["+","-","*","#","/","^","("];function Z(e){return!Me.includes(e)}function De(e){const a=[];let l=!1;for(;;){let s;if(e.length===0)break;(s=e.match(/^\d+(?:\.\d+)?/))?(l&&a.push("**"),l=!0,a.push(+s[0]),e=e.slice(s[0].length)):(s=e.match(/^(sin|cos|tan|exp|log|abs|min|max)/))?(l&&a.push("**"),l=!1,a.push(s[0]),e=e.slice(s[0].length)):(s=e.match(/^(pi|pz|ppz|sz|e|i|c|z|fx|fy)/))?(l&&a.push("**"),l=!0,a.push(s[0]),e=e.slice(s[0].length)):((s=e.match(/^[-+*#\/^()]/))&&(l&&s[0]==="("&&a.push("**"),l=!1,s[0]===")"&&(l=!0),a.push(s[0])),e=e.slice(1))}const t=[],n=[];let r;for(;r=a.shift();)if(typeof r=="number"||r.match(/^(pi|pz|ppz|sz|e|i|c|z|fx|fy)$/))t.push(r);else if(r===")"){for(;n[n.length-1]!=="(";){const m=n[n.length-1];if(!m)return["z"];n.pop(),t.push(m)}if(n.pop()!=="(")return["z"];const s=n[n.length-1];if(!s)continue;Z(s)&&(n.pop(),t.push(s))}else if(r==="("||Z(r))n.push(r);else{const s=r;let m;for(;(m=n[n.length-1])&&m!=="(";){const d=Y(s),g=Y(m);if(!(g>d||d===g&&Oe(s)==="l"))break;t.push((n.pop(),m))}n.push(s)}for(;r=n.pop();){if(r==="("||r===")")return["z"];t.push(r)}return t}function Be(e){var a;try{const l=[];for(let t of e)if(typeof t=="number")l.push(`vec2(${t}, 0)`);else if(t==="i")l.push("vec2(0, 1)");else if(t==="pi")l.push("vec2(3.141592653589793, 0)");else if(t==="e")l.push("vec2(2.718281828459045, 0)");else if(t==="fx")l.push("vec2(1, -1)");else if(t==="fy")l.push("vec2(-1, 1)");else if(t.match(/^(pz|ppz|sz|c|z)$/))l.push(t);else if(t==="+"||t==="-"||t==="#"){const n=l.pop(),r=(a=l.pop())!=null?a:"";l.push(`${r} ${t==="#"?"*":t} ${n}`)}else if(t==="*"||t==="**"||t==="/"||t==="^"||t==="min"||t==="max"){t==="/"?t="div":t==="^"?t="power":(t==="*"||t==="**")&&(t="mult");const n=l.pop(),r=l.pop();l.push(`${t}(${r}, ${n})`)}else(t==="sin"||t==="cos"||t==="tan"||t==="exp"||t==="log"||t==="abs")&&l.push(`${t}(${l.pop()})`);return l.length!==1?"z":l[0]}catch{return"z"}}function te(e){return Be(De(e))}Object.assign(window,{glsl:te});const Ke=T("Apply Equation"),Ne=h("option",{value:"simple"},"Simple",-1),Re=h("option",{value:"gradient"},"Gradient",-1),Te=h("option",{value:"rotation"},"Rotation",-1),Ae=h("option",{value:"trig"},"Trigonometric",-1),He=h("option",{value:"exp"},"Exponential",-1),Qe=h("option",{value:"newton"},"Newton's Method",-1),qe=T(" Reset Position "),at=y({__name:"FractalExplorer",setup(e){const a=Q(100,5,1e3);v("detail",a);function l(o){return o<=10?5:o<=25?5*Math.ceil((o-5)/5):o<=50?25:50*Math.ceil((o-50)/50)}function t(o){return o<10?10:o<25?5*~~((o+5)/5):o<50?50:50*~~((o+50)/50)}const n=Q(2,.1,1/0);v("limit",n);function r(o){return o<=2?Math.ceil(10*(o-.1))/10:Math.ceil(o-1)}function s(o){return o<2?~~(10*(o+.1))/10:~~(o+1)}const m=f("z^2+c");v("equation",m);const d=f("simple");v("theme",d);const g={simple:1,gradient:2,rotation:3,newton:4,trig:5,exp:6},le=q(()=>g[d.value]),V=f(0);v("colorOffset",V);const w=f(1);v("repetition",w);const k=f(1);v("spectrum",k);const $=f(!1);v("darkness",$);const C=f(!1);v("split",C);const I=f(!1);v("altColors",I);const oe="in vec2 pos;out vec4 color;uniform int detail;uniform float limit;uniform int theme;uniform float colorOffset;uniform float repetition;uniform float spectrum;uniform bool darkness;uniform bool split;uniform bool altColors;float pi=3.1415926535;vec3 rgb2hsv(vec3 c){vec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);float e=1.0e-10;return vec3(abs(q.z+(q.w-q.y)/(6.0*d+e)),d/(q.x+e),q.x);}vec3 hsv2rgb(vec3 c){vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y);}vec3 simplePalette(int i){float hue=mod(0.02*repetition*float(i),1.0);vec3 hsv=vec3(1.0-hue*spectrum,1,1);if(darkness)hsv.z=mod(0.02*float(i),1.0);hsv.x=mod(hsv.x+colorOffset,1.0);return hsv2rgb(hsv);}vec3 gradientPalette(vec3 sz,int i){sz=abs(sz)/float(i)*repetition;vec3 hsv=rgb2hsv(sin(abs(sz*5.0))*0.45+0.5);vec3 rgb=hsv2rgb(vec3(hsv.x*spectrum+colorOffset,hsv.yz));if(darkness)rgb*=mod(float(i)*0.02,1.0);return rgb;}vec3 rotationPalette(float t,int i){float hue=mod(2.0*t/pi*repetition,1.0);vec3 rgb=hsv2rgb(vec3(1.0-hue*spectrum+colorOffset,1,1));if(darkness)rgb*=mod(float(i)*0.02,1.0);return rgb;}vec3 newtonPalette(float t,int i){float hue=mod(t/pi*repetition,1.0)*spectrum;hue=mod(hue+colorOffset,1.0);vec3 rgb=hsv2rgb(vec3(1.0-hue,1,1));if(darkness)rgb*=mod(float(i)*0.02,1.0);return rgb;}vec3 trigPalette(int i){float t=float(i)*0.1*repetition;float n1,n2;if(split){n1=1.0/sin(t)*0.5+0.5;n2=1.0/tan(t)*0.5+0.5;}else{n1=sin(t)*0.5+0.5;n2=cos(t)*0.5+0.5;}vec3 rgb;if(altColors){rgb=vec3(n2,n1,n2);}else{rgb=vec3(n1,n2,split?0.5:1.0);}if(darkness)rgb*=mod(float(i)*0.02,1.0);vec3 hsv=rgb2hsv(rgb);hsv.x=mod(hsv.x*spectrum+colorOffset,1.0);return hsv2rgb(hsv);}vec3 expPalette(int i){float t=float(i)*0.1*repetition;float n1,n2;if(split){n1=1.0/log(t);n2=1.0/exp(t);}else{n1=log(t);n2=exp(t);}n1=mod(n1,1.0);n2=mod(n2,1.0);vec3 rgb;if(altColors){rgb=vec3(n2,n1,n2);}else{rgb=vec3(n1,n2,split?0.5:1.0);}if(darkness)rgb*=mod(float(i)*0.02,1.0);vec3 hsv=rgb2hsv(rgb);hsv.x=mod(hsv.x*spectrum+colorOffset,1.0);return hsv2rgb(hsv);}vec2 cube(vec2 a){float x2=a.x*a.x;float y2=a.y*a.y;float d=x2-y2;return vec2(a.x*(d-y2-y2),a.y*(d+x2+x2));}vec2 sqr(vec2 a){return vec2(a.x*a.x-a.y*a.y,2.0*a.x*a.y);}vec2 mult(vec2 a,vec2 b){float x=a.x*b.x-a.y*b.y;float y=a.x*b.y+a.y*b.x;return vec2(x,y);}vec2 div(vec2 a,vec2 b){float denom=1.0/(b.x*b.x+b.y*b.y);return vec2(a.x*b.x+a.y*b.y,a.y*b.x-a.x*b.y)*denom;}vec2 power(vec2 a,vec2 b){int count=int(b.x);if(count<=1)return a;vec2 result=a;for(int i=1;i<count;i++){result=mult(result,a);}return result;}void main(){vec2 pz,ppz,nz,c=pos,z;vec3 sz;if(theme==4||theme==1&&split)z=pos;int iter=0;for(int i=0;i<detail;i++){ppz=pz;pz=z;z={{EQ}};iter++;if(length(z)>limit){if(theme==1){color=vec4(simplePalette(iter),1);return;}else if(theme==2){color=vec4(gradientPalette(sz,iter),1);return;}else if(theme==3){color=vec4(rotationPalette(atan(sz.x,sz.y),iter),1);return;}else if(theme==5){color=vec4(trigPalette(iter),1);return;}else if(theme==6){color=vec4(expPalette(iter),1);return;}}if(theme==4&&length(nz)>limit)iter--;nz+=z;sz.x+=dot(z-pz,pz-ppz);sz.y+=dot(z-pz,z-pz);sz.z+=dot(z-ppz,z-ppz);if(split){sz+=sign(vec3(float(z),float(pz),float(ppz)));}if(theme==3&&!split){sz-=sign(vec3(float(z),float(pz),float(ppz)));}}if(theme==2){color=vec4(gradientPalette(sz,iter),1);}else if(theme==3){color=vec4(rotationPalette(pi-atan(sz.y/sz.x),detail),1);}else if(theme==4){if(altColors)z=nz;color=vec4(newtonPalette(atan(z.y/z.x),iter),1);}else color=vec4(0,0,0,1);}",S=f("zoomLevel");v("indicator",S);function ne(){S.value={zoomLevel:"position",position:"zoomLevel"}[S.value]||"position"}const E=K(f(1),100),F=K(f(0)),L=K(f(0)),ae=q(()=>(x(F),x(L),x(E),S.value==="position"?`Position: (${F.value}, ${L.value})`:`Zoom Level: ${E.value.toLocaleString()}`)),A=f();let U,O=f();function H(){U==null||U(),fe(A,oe.replace("{{EQ}}",te(m.value))).then(o=>{o.useUniform("detail","i",a),o.useUniform("limit","f",n),o.useUniform("theme","i",le),o.useUniform("colorOffset","f",V),o.useUniform("repetition","f",w),o.useUniform("spectrum","f",k),o.useUniform("darkness","i",$),o.useUniform("split","i",C),o.useUniform("altColors","i",I),o.onDispose(re(()=>{E.value=4/(o.bounds.xEnd.value-o.bounds.xStart.value),F.value=(o.bounds.xEnd.value+o.bounds.xStart.value)/2,L.value=(o.bounds.yEnd.value+o.bounds.yStart.value)/2})),O.value=()=>{o.bounds.xStart.value=-2,o.bounds.xEnd.value=2,o.bounds.yStart.value=-2,o.bounds.yEnd.value=2},U=o.destroy})}return H(),(o,u)=>(b(),_(de,null,{options:p(()=>[i(X,{modelValue:x(a),"onUpdate:modelValue":u[0]||(u[0]=c=>G(a)?a.value=c:null),decrement:l,increment:t,label:"Detail Level:"},null,8,["modelValue"]),i(X,{modelValue:x(n),"onUpdate:modelValue":u[1]||(u[1]=c=>G(n)?n.value=c:null),decrement:r,increment:s,label:"Fractal Size:"},null,8,["modelValue"]),i(z,{label:"Equation:"},{default:p(()=>[i(pe,{modelValue:m.value,"onUpdate:modelValue":u[2]||(u[2]=c=>m.value=c)},null,8,["modelValue"]),i(N,{style:{"white-space":"pre"},onClick:H},{default:p(()=>[Ke]),_:1})]),_:1}),i(z,{label:"Theme:"},{default:p(()=>[i(ce,{modelValue:d.value,"onUpdate:modelValue":u[3]||(u[3]=c=>d.value=c)},{default:p(()=>[Ne,Re,Te,Ae,He,Qe]),_:1},8,["modelValue"])]),_:1}),i(z,{label:"Color Offset:"},{default:p(()=>[i(B,{modelValue:V.value,"onUpdate:modelValue":u[4]||(u[4]=c=>V.value=c),max:1,min:0,step:"any"},null,8,["modelValue"])]),_:1}),i(z,{label:"Color Repetition:"},{default:p(()=>[i(B,{modelValue:w.value,"onUpdate:modelValue":u[5]||(u[5]=c=>w.value=c),max:10,min:0,step:"any"},null,8,["modelValue"])]),_:1}),i(z,{label:"Color Spectrum:"},{default:p(()=>[i(B,{modelValue:k.value,"onUpdate:modelValue":u[6]||(u[6]=c=>k.value=c),max:1,min:0,step:"any"},null,8,["modelValue"])]),_:1}),i(z,{label:"Darkness Effect?"},{default:p(()=>[i(D,{modelValue:$.value,"onUpdate:modelValue":u[7]||(u[7]=c=>$.value=c)},null,8,["modelValue"])]),_:1}),d.value!=="newton"?(b(),_(z,{key:0,label:d.value==="simple"?"Mimic Newton's Method?":d.value==="rotation"?"Alternate Split?":d.value==="trig"?"Alternate Trig Functions?":d.value==="exp"?"Invert Exponentials?":"Split Effect?"},{default:p(()=>[i(D,{modelValue:C.value,"onUpdate:modelValue":u[8]||(u[8]=c=>C.value=c)},null,8,["modelValue"])]),_:1},8,["label"])):M("",!0),d.value==="newton"||d.value==="trig"||d.value==="exp"?(b(),_(z,{key:1,label:d.value==="newton"?"3D Effect?":"Alternate Coloring?"},{default:p(()=>[i(D,{modelValue:I.value,"onUpdate:modelValue":u[9]||(u[9]=c=>I.value=c)},null,8,["modelValue"])]),_:1},8,["label"])):M("",!0)]),buttons:p(()=>[x(O)?(b(),_(N,{key:0,onClick:x(O)},{default:p(()=>[qe]),_:1},8,["onClick"])):M("",!0)]),indicator:p(()=>[h("div",{style:{cursor:"pointer"},onClick:ne},ee(x(ae)),1)]),default:p(()=>[h("canvas",{ref_key:"canvas",ref:A},null,512)]),_:1}))}});export{at as default};
