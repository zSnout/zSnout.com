import{b as p,M as B,F as O}from"./BookmarkIcon.2ba3923d.js";import{C as T}from"./CardGrid.866e42e7.js";import{D as x}from"./DocumentDisplay.013d23d6.js";import{T as L}from"./Title.08f68131.js";import{d as M,k as u,V as n,o as m,f,b as a,w as l,e as r,t as k,u as $,ae as h,X as V,a as N,F as D,c as I,U as w,m as b}from"./index.3fd24dee.js";const S=r(" Log Out "),Y=r("Log Out Other Devices"),A=r("Change Username"),E=r("Change Password"),G=N("p",null,null,-1),K={key:2},X={key:0},j=r("OK"),q=r("Cancel"),Z=M({__name:"MyAccount",setup(z){const _=u(!1),y=u(""),g=u(!1),d=u(!1),C=u(""),v=u(""),i=u(""),c=u(""),s=u("username");n.on("account:done:reset-session",()=>{y.value="Your other devices have been logged out.",setTimeout(()=>{_.value=!1},1e3)});function F(){_.value=!0,y.value="Logging out your other devices...",n.emit("account:reset-session",V.value,!0)}function U(t){g.value=!0,d.value=!0,C.value=`Pick a new ${s.value=t} below.`,t==="username"?v.value=h.value:v.value="",i.value="",c.value=""}function P(){const t=s.value;t==="password"?n.emit("account:update:password",V.value,v.value,i.value):t==="username"&&n.emit("account:update:username",V.value,v.value),d.value=!1;function e(){n.off(`account:done:update:${t}`,o),d.value=!0}function o(){n.off("error",e),C.value=`Your ${t} has been changed.`,setTimeout(()=>g.value=!1,1e3)}n.once("error",e),n.once(`account:done:update:${t}`,o)}return(t,e)=>(m(),f(D,null,[a(x,null,{default:l(()=>[a(L,null,{default:l(()=>[r("@"+k($(h))+"'s Account",1)]),_:1}),a(T,null,{default:l(()=>[a(p,{onClick:e[0]||(e[0]=o=>(h.value="",V.value="",t.$router.push("/")))},{default:l(()=>[S]),_:1}),a(p,{onClick:F},{default:l(()=>[Y]),_:1}),a(p,{onClick:e[1]||(e[1]=o=>U("username"))},{default:l(()=>[A]),_:1}),a(p,{onClick:e[2]||(e[2]=o=>U("password"))},{default:l(()=>[E]),_:1})]),_:1})]),_:1}),a(B,{open:_.value},{buttons:l(()=>[G]),default:l(()=>[N("p",null,k(y.value),1)]),_:1},8,["open"]),a(B,{open:g.value},{buttons:l(()=>[d.value?(m(),f(D,{key:1},[a(p,{onClick:P},{default:l(()=>[j]),_:1}),a(p,{cancel:"",onClick:e[9]||(e[9]=o=>g.value=!1)},{default:l(()=>[q]),_:1})],64)):(m(),f("p",X))]),default:l(()=>[N("p",null,k(C.value),1),d.value?(m(),I(O,{key:0,modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=o=>v.value=o),autocomplete:s.value,placeholder:s.value==="password"?"Old Password":"New Username",type:s.value==="password"?"password":"text",onInput:e[4]||(e[4]=o=>w.value="")},null,8,["modelValue","autocomplete","placeholder","type"])):b("",!0),s.value==="password"&&d.value?(m(),f(D,{key:1},[a(O,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=o=>i.value=o),autocomplete:"new-password",placeholder:"New Password",type:"password",onInput:e[6]||(e[6]=o=>w.value="")},null,8,["modelValue"]),a(O,{modelValue:c.value,"onUpdate:modelValue":e[7]||(e[7]=o=>c.value=o),autocomplete:"new-password",placeholder:"Verify Password",type:"password",onInput:e[8]||(e[8]=o=>w.value="")},null,8,["modelValue"])],64)):b("",!0),s.value==="password"&&i.value!==c.value||$(w)?(m(),f("p",K,k(s.value==="password"&&i.value!==c.value?"Your passwords should match.":$(w)),1)):b("",!0)]),_:1},8,["open"])],64))}});export{Z as default};
