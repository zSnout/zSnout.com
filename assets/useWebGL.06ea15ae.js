import{_ as F,S as C,H as T,L as D,a as z,O as I,U as O,B as U,M as $}from"./Modal.7d3241da.js";import{d as N,m as V,o as A,h as G,e as d,a as c,f as m,R as M,c as H,q as W,s as v,b as K,F as X,g as Y,w as g,ao as j,X as q,ap as J}from"./index.eb0ca499.js";const Q=Y("OK"),Z={class:"content"},ee=N({__name:"FullscreenDisplay",props:{options:{type:Boolean}},setup(r){const o=V(!1);return(a,t)=>(A(),G(X,null,[d(m(O),{class:"nav",top:""},{default:c(()=>[d(C,null,{default:c(()=>[d(T,{class:"padding"},{default:c(()=>[d(m(M),{to:"/"},{default:c(()=>[d(D,{class:"logo",invert:""})]),_:1}),d(z),a.$slots.options?(A(),H(I,{key:0,class:"options fullscreen",role:"button",onClick:t[0]||(t[0]=n=>o.value=!o.value)})):W("",!0)]),_:1})]),_:1})]),_:1}),d($,{open:o.value},{buttons:c(()=>[d(U,{cancel:"",onClick:t[1]||(t[1]=n=>o.value=!o.value)},{default:c(()=>[Q]),_:1}),v(a.$slots,"buttons",{},void 0,!0)]),default:c(()=>[v(a.$slots,"options",{},void 0,!0)]),_:3},8,["open"]),K("div",Z,[v(a.$slots,"default",{},void 0,!0)])],64))}});var se=F(ee,[["__scopeId","data-v-3118e2e0"]]);function te(r){const o=[];return J(()=>o.forEach(a=>a())),new Promise(a=>{o.push(g(()=>{const t=j(r);if(t instanceof HTMLCanvasElement){const{width:n,height:l}=q(t),i=[];o.push(g(()=>{t.width=n.value*devicePixelRatio,t.height=l.value*devicePixelRatio,i.forEach(e=>e())})),a({canvas:t,onDispose:e=>o.push(e),onResize:e=>i.push(e),size:{width:n,height:l},dispose(){o.forEach(e=>e()),o.splice(0,o.length)}})}}))})}function b(r,o,a){const t=r.createShader(r[`${o}_SHADER`]);if(!t)throw new Error("An error occurred while initializing a shader.");if(r.shaderSource(t,`#version 300 es
precision highp float;
`+a.trim()),r.compileShader(t),r.getShaderParameter(t,r.COMPILE_STATUS))return t;throw console.log(r.getShaderInfoLog(t)),r.deleteShader(t),new Error("An error occurred while compiling a shader.")}function re(r,o,a){const t=r.createProgram();if(!t)throw new Error("An error occurred while initializing a WebGL program.");const n=b(r,"VERTEX",o),l=b(r,"FRAGMENT",a);if(r.attachShader(t,n),r.attachShader(t,l),r.linkProgram(t),r.getProgramParameter(t,r.LINK_STATUS))return{program:t,vertex:n,fragment:l};throw console.log(r.getProgramInfoLog(t)),r.deleteProgram(t),new Error("An error occurred while creating a WebGL program.")}const oe=`
in vec2 _pos;
out vec2 pos;

void main() {
  gl_Position = vec4(pos = _pos, 0, 1);
}`;async function ie(r,o,a){var x;const t=await te(r),{canvas:n,onResize:l,onDispose:i}=t,e=n.getContext("webgl2",{preserveDrawingBuffer:a==null?void 0:a.preserveDrawingBuffer});if(!e)throw new Error("An error occurred while initializing the context.");const{program:f,vertex:E,fragment:R}=re(e,(x=a==null?void 0:a.vertShader)!=null?x:oe,o);e.useProgram(f),i(()=>e.deleteProgram(f)),i(()=>e.deleteShader(E)),i(()=>e.deleteShader(R));const w=e.getAttribLocation(f,"_pos");e.enableVertexAttribArray(w);const _=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,1,1,0,0,0]),e.STATIC_DRAW),e.vertexAttribPointer(w,2,e.FLOAT,!1,0,0),i(()=>e.deleteBuffer(_));function h(){e.isContextLost()||(e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.viewport(-n.width,-n.height,2*n.width,2*n.height),e.drawArrays(e.TRIANGLES,0,6))}let p=!1;const L=setInterval(()=>{p&&(p=!1,h())});i(()=>clearInterval(L)),l(h);function k(B,P,y){if(e.isContextLost())return;const S=e.getUniformLocation(f,B);!S||i(g(()=>{let s=m(y);typeof s=="number"&&(s=[s]),typeof s=="boolean"&&(s=[s]),!(s.length<1||s.length>4)&&(e[`uniform${s.length}${P}v`](S,s.map(u=>u===!0?1:u===!1?0:u)),p=!0)}))}return Object.assign(t,{gl:e,program:f,render:h,useUniform:k,destroy(){t.dispose()}})}export{se as F,ie as u};
