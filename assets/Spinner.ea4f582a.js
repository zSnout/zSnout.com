import{d as I,k as v,a8 as S,as as D,au as F,E as b,r as y,j as g,ay as z,c as B,w as m,o as E,b as k,a as u,aq as H}from"./index.aa4bc309.js";import{F as T}from"./FullscreenDisplay.4603a725.js";import{u as $}from"./useCanvas.b49773c1.js";import{a as x,H as L}from"./Modal.1b63f811.js";const R=u("span",null,"/",-1),A=I({__name:"Spinner",setup(V){const N=v(),P=S(),c=v(!1),s=v(0),h=v(),p=D(Math.PI/360,Math.PI/1440,Math.PI/8);return $(N).then(w=>{const{canvas:t,onDispose:n,onResize:_,size:a}=w,e=t.getContext("2d"),M=F(()=>Math.min(a.width.value/2,a.height.value/2));if(!e)throw new Error("Your device doesn't support HTML5 canvases.");let l=NaN,o=NaN;e.translate(a.width.value/2,a.height.value/2);function d(){e.beginPath(),e.fillStyle="white",e.arc(a.width.value/2,a.height.value/2,M.value,0,2*Math.PI),e.fill()}h.value=d,d(),_(d),n(b(y({pointer:P,rotation:s}),({pointer:{x:i,y:r}})=>{if(!c.value){l=NaN,o=NaN;return}const f=Math.hypot(a.width.value/2-i,a.height.value/2-r),C=Math.atan2(r-a.height.value/2,i-a.width.value/2);if(f>M.value){l=NaN,o=NaN;return}[i,r]=[a.width.value/2+f*Math.cos(s.value-C),a.height.value/2-f*Math.sin(s.value-C)],!isNaN(l)&&!isNaN(o)&&(e.beginPath(),e.moveTo(l,o),e.lineTo(i,r),e.stroke()),l=i,o=r}))}),g("pointerdown",()=>c.value=!0),g("pointerup",()=>c.value=!1),z(()=>s.value+=p.value),(w,t)=>(E(),B(T,null,{indicator:m(()=>[k(L,null,{default:m(()=>[u("span",{onClick:t[0]||(t[0]=n=>p.value-=Math.min(Math.PI/1440))},"Slower"),R,u("span",{onClick:t[1]||(t[1]=n=>p.value+=Math.min(Math.PI/1440))},"Faster"),k(x),u("span",{onClick:t[2]||(t[2]=(...n)=>h.value&&h.value(...n))},"Clear Canvas")]),_:1})]),default:m(()=>[u("canvas",{ref_key:"canvas",ref:N,class:"canvas",style:H(`transform: rotate(${s.value}rad)`)},null,4)]),_:1}))}});export{A as default};
