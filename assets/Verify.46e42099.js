import{d as l,k as m,aE as f,c as r,w as t,aC as d,aB as p,aD as y,aF as _,o as a,b as v,f as k,t as h,m as n,e as c}from"./index.70e8d914.js";import{D as C}from"./DocumentDisplay.d612cd2c.js";import{T as g}from"./Title.8f010710.js";import{u as V}from"./useApi.9f2beb7d.js";import"./Modal.dc2c4486.js";const D=c("Verifying your account..."),T={key:0},x=c(" Go back to homepage "),L=l({__name:"Verify",setup(B){const e=m(""),s=f().query.code;async function i(){if(typeof s!="string"){e.value="Sorry, the code you used is invalid. Try again later.";return}const o=await V({api:"account/verifyCode",method:"PATCH",body:{verifyCode:s},resultKeys:["session","username"],desc:"verify accounts"});o instanceof Error?e.value=`Error: ${o.message}`:(d.value=o.session,p.value=o.username,y.replace("/"))}return i(),(o,E)=>{const u=_("RouterLink");return a(),r(C,{center:""},{default:t(()=>[v(g,null,{default:t(()=>[D]),_:1}),e.value?(a(),k("p",T,h(e.value),1)):n("",!0),e.value!=="Verifying your account..."?(a(),r(u,{key:1,to:"/"},{default:t(()=>[x]),_:1})):n("",!0)]),_:1})}}});export{L as default};
