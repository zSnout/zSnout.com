import{_ as P,S as F,H as y,L as T,a as D,O as I,U as z,B as O,M as U}from"./Modal.d8c32823.js";import{d as $,m as N,o as A,h as G,e as i,a as c,f as g,R as V,c as M,q as W,s as v,b as H,F as K,g as X,w as m,ao as Y,X as j,ap as q}from"./index.d69ba7bc.js";const J=X("OK"),Q={class:"content"},Z=$({__name:"FullscreenDisplay",props:{options:{type:Boolean}},setup(r){const o=N(!1);return(a,t)=>(A(),G(K,null,[i(g(z),{class:"nav",top:""},{default:c(()=>[i(F,null,{default:c(()=>[i(y,{class:"padding"},{default:c(()=>[i(g(V),{to:"/"},{default:c(()=>[i(T,{class:"logo",invert:""})]),_:1}),i(D),a.$slots.options?(A(),M(I,{key:0,class:"options fullscreen",role:"button",onClick:t[0]||(t[0]=n=>o.value=!o.value)})):W("",!0)]),_:1})]),_:1})]),_:1}),i(U,{open:o.value},{buttons:c(()=>[i(O,{cancel:"",onClick:t[1]||(t[1]=n=>o.value=!o.value)},{default:c(()=>[J]),_:1}),v(a.$slots,"buttons",{},void 0,!0)]),default:c(()=>[v(a.$slots,"options",{},void 0,!0)]),_:3},8,["open"]),H("div",Q,[v(a.$slots,"default",{},void 0,!0)])],64))}});var ne=P(Z,[["__scopeId","data-v-3118e2e0"]]);function ee(r){const o=[];return q(()=>o.forEach(a=>a())),new Promise(a=>{o.push(m(()=>{const t=Y(r);if(t instanceof HTMLCanvasElement){const{width:n,height:d}=j(t),s=[];o.push(m(()=>{t.width=n.value*devicePixelRatio,t.height=d.value*devicePixelRatio,s.forEach(e=>e())})),a({canvas:t,onDispose:e=>o.push(e),onResize:e=>s.push(e),size:{width:n,height:d},dispose(){o.forEach(e=>e()),o.splice(0,o.length)}})}}))})}function E(r,o,a){const t=r.createShader(r[`${o}_SHADER`]);if(!t)throw new Error("An error occurred while compiling a shader.");if(r.shaderSource(t,`#version 300 es
precision highp float;
`+a.trim()),r.compileShader(t),r.getShaderParameter(t,r.COMPILE_STATUS))return t;throw console.log(r.getShaderInfoLog(t)),r.deleteShader(t),new Error("An error occurred while compiling a shader.")}function te(r,o,a){const t=r.createProgram();if(!t)throw new Error("An error occurred while creating the WebGL program.");const n=E(r,"VERTEX",o),d=E(r,"FRAGMENT",a);if(r.attachShader(t,n),r.attachShader(t,d),r.linkProgram(t),r.getProgramParameter(t,r.LINK_STATUS))return{program:t,vertex:n,fragment:d};throw console.log(r.getProgramInfoLog(t)),r.deleteProgram(t),new Error("An error occurred while creating the WebGL program.")}const re=`
in vec2 _pos;
out vec2 pos;

void main() {
  gl_Position = vec4(pos = _pos, 0, 1);
}`;async function se(r,o,a){var x;const t=await ee(r),{canvas:n,onResize:d,onDispose:s}=t,e=n.getContext("webgl2",{preserveDrawingBuffer:a==null?void 0:a.preserveDrawingBuffer});if(!e)throw new Error("An error occurred while initializing the context.");const{program:f,vertex:b,fragment:L}=te(e,(x=a==null?void 0:a.vertShader)!=null?x:re,o);e.useProgram(f),s(()=>e.deleteProgram(f)),s(()=>e.deleteShader(b)),s(()=>e.deleteShader(L));const w=e.getAttribLocation(f,"_pos");e.enableVertexAttribArray(w);const _=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,1,1,0,0,0]),e.STATIC_DRAW),e.vertexAttribPointer(w,2,e.FLOAT,!1,0,0),s(()=>e.deleteBuffer(_));function p(){e.isContextLost()||(e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.viewport(-n.width,-n.height,2*n.width,2*n.height),e.drawArrays(e.TRIANGLES,0,6))}let u=!1;const R=setInterval(()=>{u&&(u=!1,p())});s(()=>clearInterval(R)),d(p);function k(h,B,C){if(e.isContextLost())return;const S=e.getUniformLocation(f,h);!S||s(m(()=>{let l=g(C);e.isContextLost()||(typeof l=="number"&&(l=[l]),!(l.length<1||l.length>4)&&(e[`uniform${l.length}${B}v`](S,l),u=!0))}))}return Object.assign(t,{gl:e,program:f,render:p,useUniform:k,destroy(){var h;t.dispose(),(h=e.getExtension("WEBGL_lose_context"))==null||h.loseContext()}})}export{ne as F,se as u};
