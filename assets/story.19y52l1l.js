import{d as de,q as u,a9 as me,aa as _,H as f,s as p,I as ve,o as c,h,e as l,w as t,F as E,u as m,K as U,i as ee,b as o,c as B,a as s,t as r,G as te,E as le,ac as ce,ag as pe,p as fe,l as ye,_ as he}from"./index.65vfmhl3.js";import{B as d,V as _e}from"./VStack.xad5wxbj.js";import{D as ge}from"./DocumentDisplay.633jhlro.js";import{D as ke}from"./Dropdown.5andrccq.js";import{F as R}from"./Field.2ydu2jt8.js";import{M as w,H as T,S,T as Ce}from"./BookmarkIcon.1thszj4g.js";import{I as ae}from"./InlineButton.197m3pe8.js";import{I as be}from"./InlineField.1bs7kao1.js";import{M as we}from"./MiddleText.3l6ge4jd.js";import{S as Te}from"./StickyTopRegion.5hbjmte6.js";import"./Navigation.vue_vue_type_script_setup_true_lang.5cehk67t.js";import"./Logo.vue_vue_type_script_setup_true_lang.5f5g8ttt.js";import"./LogoLight.539ztpd2.js";import"./SharedNav.28xyli12.js";const g=M=>(fe("data-v-d5a493ef"),M=M(),ye(),M),Se={key:0},Ve={key:1},xe={key:2},Oe={style:{flex:"1"}},$e={key:5},Me=g(()=>s("div",null,' Need help? Click the "?" icon in the navigation bar for more information about this page. ',-1)),Ie=g(()=>s("h1",null,"Single Sentence Stories",-1)),Le=g(()=>s("p",null,[o(" This application lets you create silly stories with friends with a small twist: you can only see the previous sentence of the story, instead of the whole thing. When you create, add to, or complete a thread, you'll only be able to see the last thing someone typed and "),s("em",null,"not"),o(" the entire previous story. This can make using context a bit more difficult and makes stories much more interesting. ")],-1)),Ne=g(()=>s("h1",null,"The Gem System",-1)),De=g(()=>s("p",null," To prevent users from creating too many stories and not being able to add to enough of them, zSnout puts a restriction on the amount of stories you can create a complete through the gem system. It's a very simple system. Each time you add to an existing thread, you earn 1 gem. Creating or completing a thread costs 10 gems. This means that, on average, users will create and complete one thread for every twenty they add to. ",-1)),qe={class:"second-layer"},Ee={key:0,class:"second-layer"},Ue=g(()=>s("option",{value:"view"},"Viewer",-1)),Be=g(()=>s("option",{value:"write"},"Writer",-1)),Fe=g(()=>s("option",{value:"manage"},"Manager",-1)),Ke={class:"second-layer trash-div"},Ae=de({__name:"story",setup(M){const k=u("Loading title..."),j=u(!1),i=""+me().query.id,v=u("waiting"),C=u(0),F=u(0),K=u(0),V=u(0);_("story:details",a=>{a.id===i&&(k.value=a.title,F.value=a.completableThreadCount,K.value=a.completedThreadCount,V.value=a.activeThreadCount)}),_("story:update:permission",(a,e)=>{a===i&&(v.value=e)}),_("story:update:gems",(a,e)=>{a===i&&(C.value=e)}),_("story:update:title",(a,e)=>{a===i&&(k.value=e)}),f.emit("story:request:details",p.value,i);const I=u(!1),x=u("");function W(a){a==null||a.preventDefault();const e=x.value.trim();e.length<20||e.length>=1e3||(I.value=!1,f.emit("story:create:thread",p.value,i,e.slice(0,100)))}const L=u(!1);let A;const Y=u(""),O=u("");_("story:thread",(a,e)=>{a==i&&(O.value="",Y.value=e.content,A=e.id,L.value=!0)});const z=u(!1);function P(a){if(a==null||a.preventDefault(),!A)return;const e=O.value.trim();e.length<20||e.length>=1e3||(f.emit("story:update:thread",p.value,i,A,e,z.value),L.value=!1)}const G=u(!1);_("story:fail",a=>{a==i&&(G.value=!0)});const y=ve(Object.create(null));_("story:update:members",(a,e)=>{if(a===i){for(const n in y)delete y[n];Object.assign(y,e)}});const N=u(!1);function oe(){v.value==="manage"&&(f.emit("story:request:members",p.value,i),N.value=!0)}const $=u("");function J(a){a==null||a.preventDefault(),$.value&&(y[$.value]="write",$.value="")}function ne(a){delete y[a]}function se(){v.value==="manage"&&f.emit("story:update:members",p.value,i,y)}const D=u(!1);function ue(){D.value=!0}function re(){D.value=!1,f.emit("story:leave",p.value,i),pe.push("/my-stories")}const q=u(!1),Q=u([]);_("story:completed",(a,e)=>{a==i&&(q.value=!0,Q.value=e)});const H=u(!1),X=u("");function ie(a){q.value=!1,H.value=!0,X.value=a}return(a,e)=>(c(),h(E,null,[l(ge,{center:"","no-footer":""},{help:t(()=>[Ie,Le,Ne,De]),default:t(()=>[l(Te,null,{default:t(()=>[m(U)?ee("",!0):(c(),h("p",Se," Looks like you're temporarily offline. zSnout is reconnecting... ")),m(p)?v.value==="none"?(c(),h("p",xe," Looks like you don't have permission to access this story! ")):m(U)&&v.value==="manage"?(c(),B(T,{key:3,wraps:""},{default:t(()=>[l(be,{maxlength:100,"model-value":k.value,style:{flex:"1"},"onUpdate:modelValue":e[2]||(e[2]=n=>m(f).emit("story:update:title",m(p),i,k.value=n))},null,8,["model-value"]),l(d,{pre:"",style:{"font-size":"1rem"},onClick:oe},{default:t(()=>[o(" Edit Members ")]),_:1})]),_:1})):m(U)?(c(),B(T,{key:4,wraps:""},{default:t(()=>[s("p",Oe,r(k.value),1),l(d,{pre:"",style:{"font-size":"1rem"},onClick:ue},{default:t(()=>[o(" Leave this Story ")]),_:1})]),_:1})):m(U)?(c(),h("p",$e,r(k.value),1)):ee("",!0):(c(),h("p",Ve,[o(" You're not logged in. "),l(ae,{onClick:e[0]||(e[0]=n=>j.value=!0)},{default:t(()=>[o("Log in")]),_:1}),o(" or "),l(ae,{onClick:e[1]||(e[1]=n=>j.value=!0)},{default:t(()=>[o("sign up")]),_:1}),o(" to access this story. ")]))]),_:1}),l(S,null,{default:t(()=>[o(r(""))]),_:1}),l(T,null,{default:t(()=>[l(S),l(we,null,{default:t(()=>[l(_e,null,{default:t(()=>[l(T,null,{default:t(()=>[s("div",null,r(C.value)+" Gem"+r(C.value==1?"":"s"),1),l(S),s("div",null,r(V.value)+" Active Thread"+r(V.value==1?"":"s"),1)]),_:1}),l(d,{disabled:V.value<=0||v.value=="none"||v.value=="view",onClick:e[3]||(e[3]=n=>m(f).emit("story:request:thread",m(p),i,z.value=!1))},{default:t(()=>[o(r(V.value<=0?"No threads are active right now.":"Add to a Thread (+1 gem)"),1)]),_:1},8,["disabled"]),l(d,{disabled:C.value<10||v.value=="none"||v.value=="view",onClick:e[4]||(e[4]=n=>(I.value=!0,x.value=""))},{default:t(()=>[o(r(C.value<10?"Earn at least 10 gems to create a thread.":"Create a Thread (costs 10 gems)"),1)]),_:1},8,["disabled"]),l(d,{disabled:C.value<10||F.value<=0||v.value=="none"||v.value=="view",onClick:e[5]||(e[5]=n=>m(f).emit("story:request:thread",m(p),i,z.value=!0))},{default:t(()=>[o(r(F.value<=1?"No threads can be completed right now.":C.value<10?"Earn at least 10 gems to complete a thread.":"Complete a Thread (costs 10 gems)"),1)]),_:1},8,["disabled"]),l(d,{disabled:K.value<=0,onClick:e[6]||(e[6]=n=>m(f).emit("story:request:completed",m(p),i))},{default:t(()=>[o(r(K.value<=0?"No threads have been completed yet.":"View Completed Threads"),1)]),_:1},8,["disabled"]),Me]),_:1})]),_:1}),l(S)]),_:1}),l(S,null,{default:t(()=>[o(r(""))]),_:1})]),_:1}),l(w,{open:I.value},{buttons:t(()=>[l(d,{cancel:"",onClick:e[8]||(e[8]=n=>I.value=!1)},{default:t(()=>[o("Cancel")]),_:1}),l(d,{onClick:W},{default:t(()=>[o("OK")]),_:1})]),default:t(()=>[s("form",{onSubmit:W},[l(R,{modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=n=>x.value=n),autocomplete:"off",maxlength:"1000",placeholder:"Enter the first sentence...",style:{"margin-bottom":"0"}},null,8,["modelValue"])],32),s("p",null,r(x.value.length<20?"Make your sentence longer.":""),1)]),_:1},8,["open"]),l(w,{open:L.value},{buttons:t(()=>[l(d,{cancel:"",onClick:e[10]||(e[10]=n=>L.value=!1)},{default:t(()=>[o("Cancel")]),_:1}),l(d,{onClick:P},{default:t(()=>[o("OK")]),_:1})]),default:t(()=>[s("p",null,r(Y.value),1),s("form",{onSubmit:P},[l(R,{modelValue:O.value,"onUpdate:modelValue":e[9]||(e[9]=n=>O.value=n),autocomplete:"off",maxlength:"1000",placeholder:"Enter the next sentence...",style:{"margin-bottom":"0"}},null,8,["modelValue"])],32),s("p",null,r(O.value.length<20?"Make your sentence longer.":""),1)]),_:1},8,["open"]),l(w,{open:G.value},{buttons:t(()=>[l(d,{cancel:"",onClick:e[11]||(e[11]=n=>(G.value=!1,te.value=""))},{default:t(()=>[o(" OK ")]),_:1})]),default:t(()=>[s("p",null,r(m(te)),1)]),_:1},8,["open"]),l(w,{open:v.value==="manage"&&N.value},{buttons:t(()=>[l(d,{onClick:e[13]||(e[13]=n=>(se(),N.value=!1))},{default:t(()=>[o("OK")]),_:1}),l(d,{cancel:"",onClick:e[14]||(e[14]=n=>(m(f).emit("story:request:members",m(p),i),N.value=!1))},{default:t(()=>[o(" Cancel ")]),_:1})]),default:t(()=>[s("form",{onSubmit:J},[l(T,null,{default:t(()=>[l(R,{modelValue:$.value,"onUpdate:modelValue":e[12]||(e[12]=n=>$.value=n),placeholder:"Type someone's username..."},null,8,["modelValue"]),l(d,{pre:"",onClick:J},{default:t(()=>[o("Add Member")]),_:1})]),_:1})],32),(c(!0),h(E,null,le(y,(n,b)=>(c(),B(T,{key:b,class:"member"},{default:t(()=>[s("div",qe,r(b),1),l(S),b===m(ce)?(c(),h("div",Ee,"Not Removable")):(c(),h(E,{key:1},[l(ke,{modelValue:y[b],"onUpdate:modelValue":Z=>y[b]=Z,class:"level"},{default:t(()=>[Ue,Be,Fe]),_:2},1032,["modelValue","onUpdate:modelValue"]),s("div",Ke,[l(Ce,{class:"trash",onClick:Z=>ne(b)},null,8,["onClick"])])],64))]),_:2},1024))),128))]),_:1},8,["open"]),l(w,{open:(v.value==="view"||v.value==="write")&&D.value},{buttons:t(()=>[l(d,{cancel:"",onClick:e[15]||(e[15]=n=>D.value=!1)},{default:t(()=>[o("Cancel")]),_:1}),l(d,{onClick:re},{default:t(()=>[o("OK")]),_:1})]),default:t(()=>[s("p",null," Are you sure you want to leave "+r(k.value)+"? You can always contact the story's owner to be re-added. ",1)]),_:1},8,["open"]),l(w,{open:q.value},{buttons:t(()=>[l(d,{cancel:"",onClick:e[16]||(e[16]=n=>q.value=!1)},{default:t(()=>[o("Cancel")]),_:1})]),default:t(()=>[(c(!0),h(E,null,le(Q.value,n=>(c(),B(d,{onClick:b=>ie(n.content)},{default:t(()=>[o(r(n.first),1)]),_:2},1032,["onClick"]))),256))]),_:1},8,["open"]),l(w,{open:H.value},{buttons:t(()=>[l(d,{cancel:"",onClick:e[17]||(e[17]=n=>H.value=!1)},{default:t(()=>[o("OK")]),_:1})]),default:t(()=>[s("p",null,r(X.value),1)]),_:1},8,["open"])],64))}});const lt=he(Ae,[["__scopeId","data-v-d5a493ef"]]);export{lt as default};
